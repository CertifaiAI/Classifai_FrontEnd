(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"8cPH":function(t,e){let n=0,i=0;const o=t=>{const[e,n,i]=t.split(":");return 60*parseFloat(e)*60+60*parseFloat(n)+parseFloat(i)};t.exports=(t,e)=>{if("string"==typeof t)if(t.startsWith("  Duration")){const a=t.split(", ")[0].split(": ")[1],r=o(a);e({duration:r,ratio:i}),(0===n||n>r)&&(n=r)}else if(t.startsWith("frame")||t.startsWith("size")){const a=t.split("time=")[1].split(" ")[0],r=o(a);i=r/n,e({ratio:i,time:r})}else t.startsWith("video:")&&(e({ratio:1}),n=0)}},G9FC:function(t,e){t.exports=(t,e)=>{const n=t._malloc(e.length*Uint32Array.BYTES_PER_ELEMENT);return e.forEach((e,i)=>{const o=t._malloc(e.length+1);t.writeAsciiToMemory(e,o),t.setValue(n+Uint32Array.BYTES_PER_ELEMENT*i,o,"i32")}),[e.length,n]}},Ji6A:function(t,e,n){const i=n("PhXl"),{log:o}=n("kI6T"),a=async(t,e)=>{o("info","fetch "+t);const n=await(await fetch(t)).arrayBuffer();o("info",`${t} file size = ${n.byteLength} bytes`);const i=new Blob([n],{type:e}),a=URL.createObjectURL(i);return o("info",`${t} blob URL = ${a}`),a};t.exports=async({corePath:t})=>{if("string"!=typeof t)throw Error("corePath should be a string!");const e=i(t),n=await a(e,"application/javascript"),r=await a(e.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),s=await a(e.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return"undefined"==typeof createFFmpegCore?new Promise(t=>{const e=document.createElement("script"),i=()=>{e.removeEventListener("load",i),o("info","ffmpeg-core.js script loaded"),t({createFFmpegCore,corePath:n,wasmPath:r,workerPath:s})};e.src=n,e.type="text/javascript",e.addEventListener("load",i),document.getElementsByTagName("head")[0].appendChild(e)}):(o("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:n,wasmPath:r,workerPath:s}))}},PhXl:function(t,e,n){var i,o;void 0===(o="function"==typeof(i=function(){return function(){var t=arguments.length;if(0===t)throw new Error("resolveUrl requires at least one argument; got none.");var e=document.createElement("base");if(e.href=arguments[0],1===t)return e.href;var n=document.getElementsByTagName("head")[0];n.insertBefore(e,n.firstChild);for(var i,o=document.createElement("a"),a=1;a<t;a++)o.href=arguments[a],e.href=i=o.href;return n.removeChild(e),i}})?i.call(e,n,e,t):i)||(t.exports=o)},UdVg:function(t,e,n){"use strict";n.r(e),n.d(e,"VideoLabellingLayoutModule",function(){return pt});var i=n("ofXK"),o=n("KZX/"),a=n("tyNb"),r=n("mrSG"),s=n("fXoL"),c=n("kRDC");let l=(()=>{class t{constructor(){this.bolbList=[],this.videoToFrame=(t,e)=>Object(r.a)(this,void 0,void 0,function*(){const e=Object(c.createFFmpeg)({log:!0,logger:t=>{try{if(console.log("logger: ",t),t.message.includes("Duration")){const e=t.message.split("Duration: ")[1].split(",")[0].split(":").map(t=>+t);this.videoDuration={hour:e[0],minute:e[1],second:e[2]}}}catch(e){}},progress:t=>{console.log("progress: ",t)}});if(t){yield e.load();const i=t;if(i){e.FS("writeFile","in_%02d.mp4",yield Object(c.fetchFile)(i)),yield e.run("-i","in_%02d.mp4","-qscale:v","5","-vf","fps=1","out_%03d.jpg");for(let t=1;;t++)try{const n=String(t).padStart(3,"0"),i=e.FS("readFile",`out_${n}.jpg`),o=URL.createObjectURL(new Blob([i.buffer],{type:"image/jpg"}));e.FS("unlink",`out_${n}.jpg`),this.bolbList.push({frameURL:o}),console.log(o)}catch(n){break}return!0}}}),this.getBlobList=()=>this.bolbList}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),h=(()=>{class t{constructor(t,e){this.frameExtractionService=t,this.router=e,this.videoSrc=null,this.statusText="",this.doDecode=()=>Object(r.a)(this,void 0,void 0,function*(){if(this.videoSrc){const t=this.frameExtractionService.videoToFrame(this.videoSrc,10);(yield t)&&(this.statusText="done")}}),this.onRedirect=()=>{this.router.navigateByUrl("/videolbl/bndbox")}}ngOnInit(){}handleFileInput(t){this.videoSrc=t.target.files.item(0)}}return t.\u0275fac=function(e){return new(e||t)(s.Hb(l),s.Hb(a.a))},t.\u0275cmp=s.Bb({type:t,selectors:[["app-video-upload"]],decls:10,vars:1,consts:[["for","file"],["type","file","id","file",3,"change"],[3,"click"]],template:function(t,e){1&t&&(s.Nb(0,"label",0),s.sc(1,"Choose Video"),s.Mb(),s.Nb(2,"input",1),s.Ub("change",function(t){return e.handleFileInput(t)}),s.Mb(),s.Nb(3,"button",2),s.Ub("click",function(){return e.doDecode()}),s.sc(4,"Start"),s.Mb(),s.Nb(5,"button",2),s.Ub("click",function(){return e.onRedirect()}),s.sc(6,"Next"),s.Mb(),s.Nb(7,"p"),s.sc(8),s.Mb(),s.Ib(9,"hr")),2&t&&(s.xb(8),s.tc(e.statusText))},styles:["*[_ngcontent-%COMP%]{background-color:#fff}"]}),t})();var d=n("fll7"),g=n("GYuA"),b=n("2Vo4");const u={scroll:!1,drag:!1,draw:!1,fitCenter:!1,clear:!1,isActiveModal:!1,save:!1};let f=(()=>{class t{constructor(){this.actionSubject=new b.a(u),this.action$=this.actionSubject.asObservable(),this.setState=t=>{this.actionSubject.next(t?Object.assign(Object.assign({},u),t):u)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=n("sYmb");function p(t,e){if(1&t){const t=s.Ob();s.Lb(0),s.Nb(1,"img",4),s.Ub("click",function(){s.lc(t);const e=s.Wb(),n=e.index,i=e.$implicit;return s.Wb().getIndex(n),i.onClick()}),s.Xb(2,"translate"),s.Mb(),s.Kb()}if(2&t){const t=s.Wb(),e=t.$implicit,n=t.index,i=s.Wb();s.xb(1),s.cc("ngClass",i.conditionalIconTheme(!(null==e||!e.nonClickable)))("ngStyle",(null==e?null:e.toggleable)&&i.conditionalActiveIcon(n))("src",e.imgPath,s.nc)("alt",e.alt)("title",s.Yb(2,6,e.hoverLabel)),s.yb("data-index",n)}}function v(t,e){if(1&t&&(s.Lb(0),s.Nb(1,"div",2),s.qc(2,p,3,8,"ng-container",3),s.Mb(),s.Kb()),2&t){const t=e.$implicit;s.xb(2),s.cc("ngIf",t)}}let x=(()=>{class t{constructor(t,e){this._annotateService=t,this._videoLabelState=e,this.labelList=[],this.bindImagePath=()=>{this.jsonSchema={logos:[{imgPath:"assets/icons/separator.svg",hoverLabel:"",alt:"",nonClickable:!0,toggleable:!1,onClick:()=>null},{imgPath:"assets/icons/pointer.svg",hoverLabel:"leftSideBar.pointer",alt:"Pointer",toggleable:!0,onClick:()=>{this._videoLabelState.setState({draw:!1,drag:!0,scroll:!0})}},{imgPath:"assets/icons/rec_bounding_box.svg",hoverLabel:"leftSideBar.rectangularBB",alt:"RectangularBB",toggleable:!0,onClick:()=>{this.resetSelectedAnnotate(),this._videoLabelState.setState({draw:!0,drag:!1,scroll:!1})}},{imgPath:"assets/icons/eraser.svg",hoverLabel:"leftSideBar.eraser",alt:"Eraser",toggleable:!1,onClick:()=>{this.resetSelectedAnnotate(),this._videoLabelState.setState({draw:!1,drag:!1,clear:!0})}},{imgPath:"assets/icons/fit_center.svg",hoverLabel:"leftSideBar.fitCenter",alt:"Fit Center",toggleable:!1,onClick:()=>{this.resetSelectedAnnotate(),this._videoLabelState.setState({draw:!1,drag:!1,fitCenter:!0,scroll:!1})}}]}},this.getIndex=t=>{this.iconIndex=t},this.resetSelectedAnnotate=()=>{this._annotateService.setState()},this.conditionalIconTheme=t=>t?"plain-icon":"utility-icon-light",this.conditionalActiveIcon=t=>t===this.iconIndex?{background:"rgb(59 59 59)"}:null}ngOnInit(){this.bindImagePath()}ngOnChanges(t){this.bindImagePath()}}return t.\u0275fac=function(e){return new(e||t)(s.Hb(g.a),s.Hb(f))},t.\u0275cmp=s.Bb({type:t,selectors:[["video-labelling-left-sidebar"]],features:[s.vb],decls:2,vars:1,consts:[[1,"utility-left-sidebar-container"],[4,"ngFor","ngForOf"],[1,"utility-icon-container"],[4,"ngIf"],[3,"ngClass","ngStyle","src","alt","title","click"]],template:function(t,e){1&t&&(s.Nb(0,"div",0),s.qc(1,v,3,1,"ng-container",1),s.Mb()),2&t&&(s.xb(1),s.cc("ngForOf",e.jsonSchema.logos))},directives:[i.k,i.l,i.j,i.m],pipes:[m.c],styles:[".utility-left-sidebar-container[_ngcontent-%COMP%]{position:absolute;top:4.5vh;min-width:2.14vw;max-width:2.14vw;min-height:95.4vh;max-height:95.4vh;background:#525353;border:.0625vw solid hsla(0,0%,100%,.25);z-index:1000}.utility-icon-container[_ngcontent-%COMP%]{min-height:5vh;max-height:5vh;align-items:baseline}.utility-icon-light[_ngcontent-%COMP%]{min-width:1.5vw;max-width:1.5vw;min-height:3vh;max-height:3vh;padding:.3vw;position:absolute;cursor:pointer}.utility-icon-light[_ngcontent-%COMP%]:active, .utility-icon-light[_ngcontent-%COMP%]:focus{background:#a9a9a9}.plain-icon[_ngcontent-%COMP%]{min-width:1.5vw;max-width:1.5vw;min-height:3vh;max-height:3vh;padding:.3vw;position:absolute;cursor:auto}"]}),t})();var w=n("XIp8"),_=n("XNiG"),M=n("HDdC"),C=n("D0XW"),y=n("Y7HM"),O=n("z+Ro");function P(t=0,e,n){let i=-1;return Object(y.a)(e)?i=Number(e)<1?1:Number(e):Object(O.a)(e)&&(n=e),Object(O.a)(n)||(n=C.a),new M.a(e=>{const o=Object(y.a)(t)?t:+t-n.now();return n.schedule(k,o,{index:0,period:i,subscriber:e})})}function k(t){const{index:e,period:n,subscriber:i}=t;if(i.next(e),!i.closed){if(-1===n)return i.complete();t.index=e+1,this.schedule(t,n)}}var S=n("SxV6"),B=n("1G5W"),j=n("dYt1"),N=n("rG2+");let F=(()=>{class t{constructor(){this.globalXY={x:0,y:0},this.panXY={x:0,y:0},this.currentClickedBox={box:-1,pos:"o"},this.lineOffset=3,this.anchrSize=2.5,this.currentDrawing={x1:0,x2:0,y1:0,y2:0},this.currentSelectedBndBox=-1,this.util=new N.a}getDiffXY({offsetX:t,offsetY:e}){try{const n={diffX:0,diffY:0};return n.diffX=this.globalXY.x+(t-this.panXY.x),n.diffY=this.globalXY.y+(e-this.panXY.y),n}catch(n){return console.log("ObjectDetection getDiffXY(offsetX: number,offsetY: number): { diffX: number; diffY: number }",n.name+": ",n.message),{diffX:-1,diffY:-1}}}setCurrentX1Y1(t,e){try{null!==t&&null!==e&&void 0!==t&&void 0!==e&&(this.currentDrawing.x1=t,this.currentDrawing.y1=e)}catch(n){console.log("ObjectDetection setCurrentX1Y1(MouseX:number, MouseY:number):void",n.name+": ",n.message)}}setCurrentX2Y2(t,e){try{null!==t&&null!==e&&void 0!==t&&void 0!==e&&(this.currentDrawing.x2=t,this.currentDrawing.y2=e)}catch(n){console.log("ObjectDetection setCurrentX2Y2(MouseX:number, MouseY:number):void",n.name+": ",n.message)}}moveAllBbox(t,e,n,i){try{for(const i of t){const t=i.x2-i.x1,o=i.y2-i.y1;i.x1=Object(j.a)(e+i.distancetoImg.x),i.y1=Object(j.a)(n+i.distancetoImg.y),i.x2=Object(j.a)(i.x1+t),i.y2=Object(j.a)(i.y1+o)}i&&i(!0)}catch(o){}}calScaleTofitScreen(t,e,n,i){try{const o={factor:-1,newX:-1,newY:-1};return o.factor=Math.min(n/t,i/e),o.factor=o.factor-.05*o.factor,o.newX=n/2-t/2*o.factor,o.newY=i/2-e/2*o.factor,o}catch(o){return{factor:-1,newX:-1,newY:-1}}}deleteSingleBox(t,e,n){try{t.splice(e,1),this.currentSelectedBndBox=-1,this.currentClickedBox={box:-1,pos:"o"},n(!0)}catch(i){}}keyboardMoveBox(t,e,{img_w:n,img_h:i,img_x:o,img_y:a},r){try{switch(t){case"up":this.moveBoxWithinPointPath(o,a,n,i,0,-3,e)&&this.moveBbox(0,0,-3,-3,e);break;case"down":this.moveBoxWithinPointPath(o,a,n,i,0,3,e)&&this.moveBbox(0,0,3,3,e);break;case"left":this.moveBoxWithinPointPath(o,a,n,i,-3,0,e)&&this.moveBbox(-3,-3,0,0,e);break;case"right":this.moveBoxWithinPointPath(o,a,n,i,3,0,e)&&this.moveBbox(3,3,0,0,e)}r(!0)}catch(s){}}moveBbox(t,e,n,i,o){o.x1+=t,o.x2+=e,o.y1+=n,o.y2+=i}moveBoxWithinPointPath(t,e,n,i,o,a,r){try{return!(r.x1+o<t||r.x2+o>t+n||r.y1+a<e||r.y2+a>e+i)}catch(s){return console.log("ObjectDetection isWithinPointPath(imgx:number, imgy:number, imgw:number, imgh:number, addx:number, addy:number, box:Boundingbox):Boolean",s.name+": ",s.message),!1}}mouseMoveBox(t,e,n){try{if(this.moveBoxWithinPointPath(n.img_x,n.img_y,n.img_w,n.img_h,t-this.currentDrawing.x1,e-this.currentDrawing.y1,n.bnd_box[this.currentSelectedBndBox])){this.setCurrentX2Y2(t,e);const i=this.currentDrawing.x2-this.currentDrawing.x1,o=this.currentDrawing.y2-this.currentDrawing.y1;this.setCurrentX1Y1(this.currentDrawing.x2,this.currentDrawing.y2),"i"!==this.currentClickedBox.pos&&"tl"!==this.currentClickedBox.pos&&"l"!==this.currentClickedBox.pos&&"bl"!==this.currentClickedBox.pos||(n.bnd_box[this.currentSelectedBndBox].x1+=i),"i"!==this.currentClickedBox.pos&&"tl"!==this.currentClickedBox.pos&&"t"!==this.currentClickedBox.pos&&"tr"!==this.currentClickedBox.pos||(n.bnd_box[this.currentSelectedBndBox].y1+=o),"i"!==this.currentClickedBox.pos&&"tr"!==this.currentClickedBox.pos&&"r"!==this.currentClickedBox.pos&&"br"!==this.currentClickedBox.pos||(n.bnd_box[this.currentSelectedBndBox].x2+=i),"i"!==this.currentClickedBox.pos&&"bl"!==this.currentClickedBox.pos&&"b"!==this.currentClickedBox.pos&&"br"!==this.currentClickedBox.pos||(n.bnd_box[this.currentSelectedBndBox].y2+=o)}}catch(i){console.log("ObjectDetection mouseMoveBox(MouseX:number, MouseY:number, CurrMeta:Metadata):void",i.name+": ",i.message)}}getCurrentSelectedBox(){try{return this.currentSelectedBndBox}catch(t){return-1}}setCurrentSelectedbBox(t){try{this.currentSelectedBndBox=t}catch(e){console.log("ObjectDetection setCurrentSelectedbBox(newNUM:number):void",e.name+": ",e.message)}}mouseUpDrawEnable(t,e,n){try{const i={selBox:-1,isNew:!1};if(-1===this.currentClickedBox.box&&null!==this.tmpbox)t.bnd_box.push(this.tmpbox),this.currentSelectedBndBox=t.bnd_box.length-1,t.bnd_box[this.currentSelectedBndBox].label=e.length>0?e[0].name:"",i.isNew=!0,i.selBox=Object(j.a)(this.currentSelectedBndBox);else if(this.currentClickedBox.box>-1&&this.tmpbox){if(t.bnd_box[this.currentSelectedBndBox].x1>t.bnd_box[this.currentSelectedBndBox].x2){const e=Object(j.a)(t.bnd_box[this.currentSelectedBndBox].x1);t.bnd_box[this.currentSelectedBndBox].x1=Object(j.a)(t.bnd_box[this.currentSelectedBndBox].x2),t.bnd_box[this.currentSelectedBndBox].x2=e}if(t.bnd_box[this.currentSelectedBndBox].y1>t.bnd_box[this.currentSelectedBndBox].y2){const e=Object(j.a)(t.bnd_box[this.currentSelectedBndBox].y1);t.bnd_box[this.currentSelectedBndBox].y1=Object(j.a)(t.bnd_box[this.currentSelectedBndBox].y2),t.bnd_box[this.currentSelectedBndBox].y2=e}}return this.currentClickedBox={box:-1,pos:"o"},this.setCurrentX1Y1(0,0),this.setCurrentX2Y2(0,0),this.tmpbox=null,n(!0),i}catch(i){return console.log("ObjectDetection MouseUpDrawEnable(CurrMeta: Metadata): number",i.name+": ",i.message),{selBox:-1,isNew:!1}}}panRectangle(t,e,n,i){try{for(const i of t){const t=i.x2-i.x1,o=i.y2-i.y1;i.x1=e+i.distancetoImg.x,i.y1=n+i.distancetoImg.y,i.x2=i.x1+t,i.y2=i.y1+o}i(!0)}catch(o){console.log("ObjectDetection panRectangle(bbox:Boundingbox[], img_X:number, img_Y:number)",o.name+": ",o.message)}}scaleAllBoxes(t,e,n,i,o){try{for(const o of e){const e=o.distancetoImg.x*t+n,a=o.distancetoImg.y*t+i,r=e+(o.x2-o.x1)*t,s=a+(o.y2-o.y1)*t;o.x1=Object(j.a)(e),o.y1=Object(j.a)(a),o.x2=Object(j.a)(r),o.y2=Object(j.a)(s);const c=o.x1-n,l=o.y1-i;o.distancetoImg.x=Object(j.a)(c),o.distancetoImg.y=Object(j.a)(l)}o&&o(!0)}catch(a){console.log("ObjectDetection scaleAllBoxes(scalefactor: number,boxes:Boundingbox[],imgX:number,imgY:number)",a.name+": ",a.message)}}mouseMoveDrawEnable(t,e,n){try{-1===this.currentClickedBox.box?this.setCurrentX2Y2(t,e):this.mouseMoveBox(t,e,n)}catch(i){console.log("ObjectDetection MouseMoveDrawEnable(MouseX: number,MouseY: number,SelectedMeta: Metadata): void",i.name+": ",i.message)}}mouseDownDrawEnable(t,e,n){try{return this.getCurrentClickBox(t,e,n),this.setCurrentX1Y1(t,e),this.setCurrentX2Y2(t,e),this.currentClickedBox.box}catch(i){return console.log("ObjectDetection MouseDownDrawEnable(MouseX:number,MouseY:number,BBox:Boundingbox[]):number",i.name+": ",i.message),-1}}setPanXY(t,e){try{return!(!t||!e||(this.panXY.x=t,this.panXY.y=e,0))}catch(n){return console.log("ObjectDetection setPanXY(newX: number, newY: number):boolean",n.name+": ",n.message),!1}}setGlobalXY(t,e){try{return!(!t||!e||(this.globalXY.x=t,this.globalXY.y=e,0))}catch(n){return console.log("ObjectDetection SetGlobalXY(newX: number, newY: number):boolean",n.name+": ",n.message),!1}}changeLabel(t,e){t&&e&&(t.label=e)}mouseClickWithinPointPath({img_x:t,img_y:e,img_w:n,img_h:i},{offsetX:o,offsetY:a}){try{return o>t&&o<t+n&&a>e&&a<e+i}catch(r){return console.log(r),!1}}drawAllBoxOn(t,e,n){try{if(e.length>0)for(const[i,o]of e.entries())this.setEachBbox(i===this.currentClickedBox.box||i===this.currentSelectedBndBox,t,o,n);if(-1===this.currentClickedBox.box&&-1===this.currentSelectedBndBox){for(const s of e)s.color="rgba(255,255,0,0.8)",this.drawEachBoxOn(t,s,n,!1);const{x1:i,x2:o,y1:a,y2:r}=this.currentDrawing;this.tmpbox=this.generateNewBox(i,o,a,r),this.tmpbox&&this.drawEachBoxOn(t,this.tmpbox,n,!0)}}catch(i){console.log("redraw(boundbox) ----\x3e ",i.name+": ",i.message)}}setEachBbox(t,e,n,i){n.color=t?"rgba(0,255,0,1.0)":"rgba(255,255,0,0.8)",n.lineWidth=t?2:1,this.drawEachBoxOn(e,n,i,!!t)}drawEachBoxOn(t,e,n,i){try{if(n){const o=e.x1+(e.x2-e.x1)/2,a=e.y1+(e.y2-e.y1)/2;n.strokeStyle="white",n.fillStyle="black",n.font="bold 12px Arial",""===e.label?(n.strokeText("",e.x1+10,e.y1+15),n.fillText("",e.x1+10,e.y1+15)):t.find(t=>t.name===e.label)?(n.strokeText(e.label,e.x1+10,e.y1+15),n.fillText(e.label,e.x1+10,e.y1+15)):(n.strokeText("Text",e.x1+10,e.y1+15),n.fillText("Text",e.x1+10,e.y1+15)),n.strokeStyle=e.color,n.beginPath(),n.rect(e.x1,e.y1,e.x2-e.x1,e.y2-e.y1),n.lineWidth=e.lineWidth,n.stroke(),n.fillStyle=e.color,i&&(n.beginPath(),n.fillRect(e.x1-this.anchrSize,e.y1-this.anchrSize,2*this.anchrSize,2*this.anchrSize),n.fillRect(e.x1-this.anchrSize,a-this.anchrSize,2*this.anchrSize,2*this.anchrSize),n.fillRect(e.x1-this.anchrSize,e.y2-this.anchrSize,2*this.anchrSize,2*this.anchrSize),n.fillRect(o-this.anchrSize,e.y1-this.anchrSize,2*this.anchrSize,2*this.anchrSize),n.fillRect(o-this.anchrSize,a-this.anchrSize,2*this.anchrSize,2*this.anchrSize),n.fillRect(o-this.anchrSize,e.y2-this.anchrSize,2*this.anchrSize,2*this.anchrSize),n.fillRect(e.x2-this.anchrSize,e.y1-this.anchrSize,2*this.anchrSize,2*this.anchrSize),n.fillRect(e.x2-this.anchrSize,a-this.anchrSize,2*this.anchrSize,2*this.anchrSize),n.fillRect(e.x2-this.anchrSize,e.y2-this.anchrSize,2*this.anchrSize,2*this.anchrSize))}}catch(o){console.log("ObjectDetection drawEachBoxOn(box:Boundingbox, context:CanvasRenderingContext2D, isSelected:boolean):void",o.name+": ",o.message)}}generateNewBox(t,e,n,i){try{const o=t<e?t:e,a=n<i?n:i,r=t>e?t:e,s=n>i?n:i;return r-o>this.lineOffset&&s-a>this.lineOffset?{x1:o,y1:a,x2:r,y2:s,lineWidth:2,color:"rgba(0,255,0,1.0)",distancetoImg:{x:0,y:0},label:"",id:this.util.generateUniquesID()}:null}catch(o){return console.log("ObjectDetection GenerateNewBox(x1:number,x2:number,y1:number,y2:number):Boundingbox",o.name+": ",o.message),null}}getBBoxDistfromImg(t,e,n){try{for(const{x1:i,y1:o,distancetoImg:a}of t){const t=i-e,r=o-n;a.x=Object(j.a)(t),a.y=Object(j.a)(r)}}catch(i){console.log("ObjectDetection GetBBoxDistfromImg(bbox:Boundingbox[],imgX:number,imgY:number)",i.name+": ",i.message)}}getCurrentClickBox(t,e,n){try{return this.currentClickedBox=this.mouseClickOnBoxes(t,e,n),this.currentClickedBox}catch(i){return console.log("ObjectDetection getCurrentClickBox(MouseX:number, MouseY:number, box:Boundingbox[]):{box:number,pos:string}",i.name+": ",i.message),{box:-1,pos:"o"}}}mouseClickOnBoxes(t,e,n){try{for(let i=0;i<n.length;++i){const o=this.getPosition(t,e,n,n[i].x1+(n[i].x2-n[i].x1)/2,n[i].y1+(n[i].y2-n[i].y1)/2,i);if(""!==o)return{box:i,pos:o}}return{box:-1,pos:"o"}}catch(i){return console.log("ObjectDetection mouseClickOnBoxes(MouseX:number, MouseY:number, box:Boundingbox[]):{box:number,pos:string}",i.name+": ",i.message),{box:-1,pos:"o"}}}getPosition(t,e,n,i,o,a){let r="";switch(this.getXPos(t,n,i,a)){case"l":r=this.getYLPos(e,n,o,a);break;case"r":r=this.getYRPos(e,n,o,a);break;case"m":r=this.getYMPos(e,n,o,a);break;case"i":n[a].y1-this.lineOffset<e&&e<n[a].y2+this.lineOffset&&(r="i")}return r}getXPos(t,e,n,i){return e[i].x1-this.lineOffset<t&&t<e[i].x1+this.lineOffset?"l":e[i].x2-this.lineOffset<t&&t<e[i].x2+this.lineOffset?"r":n-this.lineOffset<t&&t<n+this.lineOffset?"m":e[i].x1-this.lineOffset<t&&t<e[i].x2+this.lineOffset?"i":"o"}getYLPos(t,e,n,i){let o="";return e[i].y1-this.lineOffset<t&&t<e[i].y1+this.lineOffset?o="tl":e[i].y2-this.lineOffset<t&&t<e[i].y2+this.lineOffset?o="bl":n-this.lineOffset<t&&t<n+this.lineOffset&&(o="l"),o}getYRPos(t,e,n,i){let o="";return e[i].y1-this.lineOffset<t&&t<e[i].y1+this.lineOffset?o="tr":e[i].y2-this.lineOffset<t&&t<e[i].y2+this.lineOffset?o="br":n-this.lineOffset<t&&t<n+this.lineOffset&&(o="r"),o}getYMPos(t,e,n,i){let o="";return e[i].y1-this.lineOffset<t&&t<e[i].y1+this.lineOffset?o="t":e[i].y2-this.lineOffset<t&&t<e[i].y2+this.lineOffset?o="b":e[i].y1-this.lineOffset<t&&t<e[i].y2+this.lineOffset&&(o="i"),o}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Db({token:t,factory:t.\u0275fac,providedIn:"any"}),t})();var L=n("ww7h"),E=n("tk/3"),z=n("cxbk");let D=(()=>{class t{constructor(t,e){this.http=t,this.router=e,this.hostPort=z.a.baseURL,this.getSingleFrameSrc=t=>this.http.get(`${this.hostPort}video/frame/${t}`),this.frameExtraction=t=>{const e={headers:new E.e({"Content-Type":"application/json"}),body:{videoPath:t,saveFrameToFolder:!0}};return this.http.post(this.hostPort+"video/init",e)}}}return t.\u0275fac=function(e){return new(e||t)(s.Rb(E.b),s.Rb(a.a))},t.\u0275prov=s.Db({token:t,factory:t.\u0275fac,providedIn:"any"}),t})();var I=n("3Pt+");const T=["videoTimelineRef"],X=["canvasdrawing"],Y=["floatdiv"],R=["lbltypetxt"];function U(t,e){if(1&t){const t=s.Ob();s.Nb(0,"li",26),s.Ub("click",function(){s.lc(t);const n=e.$implicit;return s.Wb().labelNameClicked(n.name)}),s.Nb(1,"span",27),s.sc(2),s.Mb(),s.Nb(3,"span",28),s.sc(4),s.Mb(),s.Mb()}if(2&t){const t=e.$implicit;s.xb(2),s.tc(t.name),s.xb(2),s.tc(t.count)}}function W(t,e){1&t&&(s.Nb(0,"li",29),s.Nb(1,"div",30),s.sc(2),s.Xb(3,"translate"),s.Mb(),s.Nb(4,"div",30),s.sc(5),s.Xb(6,"translate"),s.Mb(),s.Mb()),2&t&&(s.xb(2),s.tc(s.Yb(3,2,"searchLabel.labelNotExist")),s.xb(3),s.tc(s.Yb(6,4,"searchLabel.enterToAdd")))}function A(t,e){if(1&t){const t=s.Ob();s.Nb(0,"img",31),s.Ub("click",function(){return s.lc(t),s.Wb().clickPlay()}),s.Mb()}}function $(t,e){if(1&t){const t=s.Ob();s.Nb(0,"img",32),s.Ub("click",function(){return s.lc(t),s.Wb().clickPause()}),s.Mb()}}function q(t,e){if(1&t&&(s.Nb(0,"div",39),s.sc(1),s.Mb()),2&t){const t=s.Wb().index,e=s.Wb(2);s.cc("ngClass",e.activeFrame===t?"active row":null),s.xb(1),s.uc(" ",t," ")}}function G(t,e){if(1&t){const t=s.Ob();s.Lb(0),s.Nb(1,"td",36),s.qc(2,q,2,2,"div",37),s.Nb(3,"div",38),s.Ub("click",function(){s.lc(t);const n=e.index;return s.Wb(2).onClickVideoTImeline(n)}),s.Mb(),s.Mb(),s.Kb()}if(2&t){const t=e.index,n=s.Wb(),i=n.index,o=n.$implicit,a=s.Wb();s.xb(2),s.cc("ngIf",0==i),s.xb(1),s.cc("ngClass",a.displayFrameIndicator(i,t,o.frame))}}function H(t,e){if(1&t){const t=s.Ob();s.Nb(0,"tr"),s.Nb(1,"td",33),s.Nb(2,"p"),s.sc(3),s.Mb(),s.Mb(),s.Nb(4,"td",34),s.Ub("click",function(){s.lc(t);const n=e.index;return s.Wb().onHide(n)}),s.Ib(5,"img",35),s.Mb(),s.qc(6,G,4,2,"ng-container",25),s.Mb()}if(2&t){const t=e.$implicit,n=e.index,i=s.Wb();s.xb(3),s.tc(t.object),s.xb(2),s.ec("id","eye_",n,""),s.cc("src",t.isShow?i.showDetailsIcon:i.hideDetailsIcon,s.nc),s.xb(1),s.cc("ngForOf",i.totalFrameArr)}}const V=function(){return{standalone:!0}},K=function(t){return{cursor:t}};let J=(()=>{class t{constructor(t,e,n,i,o,a){this._videoLblStateService=t,this.videoFrameExtractionService=e,this._boundingBoxCanvas=n,this._mouseCursorService=i,this._annotateSelectState=o,this._videoLblApiService=a,this.totalFrameArr=[{frameURL:"../../../assets/video_img/1.jpg"},{frameURL:"../../../assets/video_img/2.jpg"},{frameURL:"../../../assets/video_img/3.jpg"},{frameURL:"../../../assets/video_img/1.jpg"},{frameURL:"../../../assets/video_img/2.jpg"},{frameURL:"../../../assets/video_img/3.jpg"},{frameURL:"../../../assets/video_img/1.jpg"},{frameURL:"../../../assets/video_img/2.jpg"},{frameURL:"../../../assets/video_img/3.jpg"},{frameURL:"../../../assets/video_img/1.jpg"},{frameURL:"../../../assets/video_img/2.jpg"},{frameURL:"../../../assets/video_img/3.jpg"},{frameURL:"../../../assets/video_img/1.jpg"},{frameURL:"../../../assets/video_img/2.jpg"},{frameURL:"../../../assets/video_img/3.jpg"}],this.labelledFrames=[{frame:[1,2,3,4,5],object:"cat1",color:"blue",isShow:!0},{frame:[1],object:"cat2",color:"blue",isShow:!0}],this.labelList=[{name:"People",count:2},{name:"People 2",count:2}],this._totalFrame=this.totalFrameArr.length,this._onHide=new s.n,this._onChangeMetadata=new s.n,this.unsubscribe$=new _.a,this.showDropdownLabelBox=!1,this.invalidInput=!1,this.labelSearch="",this.occupiedSpace=[],this.activeFrame=0,this.activePreview=new Image,this.verticalScroll=!1,this.isPlayingFrame=!1,this.isPausingFrame=!0,this.pauseFrameIndex=0,this.isMouseDown=!1,this.showDetailsIcon="assets/icons/eye_show.svg",this.hideDetailsIcon="assets/icons/eye_hide.svg",this.onScroll=({deltaY:t})=>{if(this.verticalScroll){this.clearCanvas();const e=this._videoTimelineRef.nativeElement.scrollLeft;void 0!==e&&this._videoTimelineRef.nativeElement.scrollTo(Object.assign({},t>0?{left:e+25}:{left:e-25})),t>0?this.activeFrame!==this._totalFrame-1&&(this.activeFrame+=1):0!==this.activeFrame&&(this.activeFrame-=1),this.activePreview.src=this.activeFrame>this.totalFrameArr.length?"":this.totalFrameArr[this.activeFrame].frameURL,this.canvasContext.drawImage(this.activePreview,0,0)}},this.displayFrameIndicator=(t,e,n)=>{let i="";return n.forEach(n=>{e===n&&(i+=t%2==0?" figure1 ":" figure2 ")}),i+=this.activeFrame===e&&" cursor row",i+=" timelineCell clickable",i},this.onClickVideoTImeline=t=>{this.clearCanvas(),this.activeFrame=t,t>this.totalFrameArr.length?this._videoLblApiService.getSingleFrameSrc(this.totalFrameArr.length-1).pipe(Object(S.a)()).subscribe(t=>{console.log("res",t),this.activePreview.src=""},t=>{console.log("Retrieve Frame Error",t)}):this._videoLblApiService.getSingleFrameSrc(t).pipe(Object(S.a)()).subscribe(t=>{console.log("res",t),this.activePreview.src=""},t=>{console.log("Retrieve Frame Error",t)}),this.activePreview.onload=()=>{this.canvasContext.drawImage(this.activePreview,0,0),this.imgFitToCenter()}},this.clickPlay=()=>{this.isPlayingFrame=!0,this.isPausingFrame=!1;let t=!0,e=0;for(let n=this.activeFrame;n<this.totalFrameArr.length;n++)P(100*e).subscribe(e=>{t&&(this.isPausingFrame?(this.isPlayingFrame=!1,t=!1,this.pauseFrameIndex=n,console.log("Pausing...",n)):(console.log("Playing...",n),this.onClickVideoTImeline(n),n===this.totalFrameArr.length-1&&(this.isPlayingFrame=!1,this.isPausingFrame=!0,this.activeFrame=0)))}),e++},this.clickPause=()=>{this.isPlayingFrame?this.isPausingFrame=!0:this.clickPlay()},this.onHide=t=>{this.labelledFrames[t].isShow=!this.labelledFrames[t].isShow,this._onHide.emit(this.labelledFrames[t])},this.validateInputLabel=({target:t})=>{const{value:e}=t;e.trim()&&(this.invalidInput=!1,this.showDropdownLabelBox=!1,this._selectMetadata.bnd_box[this.annotateState.annotation].label=e,this.labelSearch="")}}ngOnInit(){this._videoLblApiService.frameExtraction("D:\\Certifai\\video\\1.mp4").pipe(Object(S.a)()).subscribe(t=>{console.log("frame extraction",t)},t=>{console.log("Retrieve Frame Error",t)}),this._videoLblStateService.action$.pipe(Object(B.a)(this.unsubscribe$)).subscribe(t=>{var{clear:e,fitCenter:n}=t,i=Object(r.b)(t,["clear","fitCenter"]);this.boundingBoxState=Object.assign(Object.assign({},i),{clear:e,fitCenter:n}),n&&this.imgFitToCenter(),e&&(this._selectMetadata.bnd_box=[],this.redrawImage(this._selectMetadata),this.emitMetadata())}),this._mouseCursorService.mouseCursor$.pipe(Object(B.a)(this.unsubscribe$)).subscribe(t=>this.mouseCursor=t),this._annotateSelectState.labelStaging$.pipe(Object(B.a)(this.unsubscribe$)).subscribe(t=>{this.annotateState=t,console.log("state",t.annotation),this._boundingBoxCanvas.setCurrentSelectedbBox(t.annotation)})}ngAfterViewInit(){this.initializeCanvas(),this.activePreview.src=this.totalFrameArr[0].frameURL,this.activePreview.onload=()=>{this.canvasContext.drawImage(this.activePreview,0,0),this.imgFitToCenter()}}ngOnChanges(t){var e,n;(null===(e=t._selectMetadata)||void 0===e?void 0:e.previousValue)&&(null===(n=t._selectMetadata)||void 0===n?void 0:n.currentValue)&&this.redrawImage(this._selectMetadata)}initializeCanvas(t="95%"){this.canvas.nativeElement.style.width=t,this.canvas.nativeElement.style.height="50%",this.canvas.nativeElement.width=this.canvas.nativeElement.offsetWidth,this.canvas.nativeElement.height=this.canvas.nativeElement.offsetHeight,this.canvasContext=this.canvas.nativeElement.getContext("2d")}onEraseBoundingBox(){this.clearCanvas(),this.canvasContext.beginPath(),this.canvasContext.drawImage(this.activePreview,0,0),this.imgFitToCenter()}clearCanvas(){this.canvasContext.clearRect(0,0,this.canvas.nativeElement.width,this.canvas.nativeElement.height)}changeMouseCursorState(t){this._mouseCursorService.setState(t)}currentCursor(){return this._mouseCursorService.changeCursor(this.mouseCursor)}imgFitToCenter(){try{const t=this._boundingBoxCanvas.calScaleTofitScreen(this._selectMetadata.img_w,this._selectMetadata.img_h,this.canvas.nativeElement.offsetWidth,this.canvas.nativeElement.offsetHeight);this._selectMetadata.img_w*=t.factor,this._selectMetadata.img_h*=t.factor,this._boundingBoxCanvas.scaleAllBoxes(t.factor,this._selectMetadata.bnd_box,this._selectMetadata.img_x,this._selectMetadata.img_y),this._selectMetadata.img_x=t.newX,this._selectMetadata.img_y=t.newY,this._boundingBoxCanvas.setGlobalXY(t.newX,t.newY),this._boundingBoxCanvas.moveAllBbox(this._selectMetadata.bnd_box,this._selectMetadata.img_x,this._selectMetadata.img_y),this.redrawImage(this._selectMetadata),this.canvasContext.canvas.style.transformOrigin="0 0",this.canvasContext.canvas.style.transform="scale(1, 1)"}catch(t){console.log(t)}}redrawImage({img_x:t,img_y:e,img_w:n,img_h:i}){this.clearCanvas(),this.canvasContext.drawImage(this.activePreview,t,e,n,i),this._boundingBoxCanvas.drawAllBoxOn(this.labelList,this._selectMetadata.bnd_box,this.canvasContext)}annotateSelectChange(t){this._annotateSelectState.setState(t)}finishDrawBoundingBox(t){const e=this._boundingBoxCanvas.mouseUpDrawEnable(this._selectMetadata,this.labelList,t=>{t&&(this.getBBoxDistanceFromImage(),this.emitMetadata())});if(e.isNew||"mouseout"===t.type){let e=t.offsetY*(100/document.documentElement.clientHeight)+8.5,n=t.offsetX*(100/document.documentElement.clientWidth)+2.5;e<9&&(e=9),e>76&&(e=76),n<2.5&&(n=2.5),n>66&&(n=66),this.floatdiv.nativeElement.style.top=e.toString()+"vh",this.floatdiv.nativeElement.style.left=n.toString()+"vw",this.showDropdownLabelBox=!0,this.labelSearch="",this.invalidInput=!1,setTimeout(()=>{this.lbltypetxt.nativeElement.focus()},100)}else this.showDropdownLabelBox=!1;e.isNew&&this.annotateSelectChange({annotation:e.selBox,isDlbClick:!1})}getBBoxDistanceFromImage(){this._boundingBoxCanvas.getBBoxDistfromImg(this._selectMetadata.bnd_box,this._selectMetadata.img_x,this._selectMetadata.img_y)}emitMetadata(){this._onChangeMetadata.emit(this._selectMetadata)}labelNameClicked(t){this.showDropdownLabelBox=!1,this._selectMetadata.bnd_box[this.annotateState.annotation].label=t,this.labelledFrames.push({frame:[1],object:t,color:"blue",isShow:!0})}labelTypeTextChange(t){console.log("label added"),this.labelList.filter(e=>e.name.includes(t))}deleteSelectedBbox(){this._boundingBoxCanvas.deleteSingleBox(this._selectMetadata.bnd_box,this.annotateState.annotation,t=>{t&&(this.annotateSelectChange({annotation:-1,isDlbClick:!1}),this.redrawImage(this._selectMetadata),this.emitMetadata(),this.labelledFrames.map(t=>{this._selectMetadata.bnd_box[0].label===t.object&&t.frame.map((e,n)=>{e===this.activeFrame&&delete t.frame[n]})}))})}doubleClickEvent(){this.annotateSelectChange({annotation:this.annotateState.annotation,isDlbClick:!0})}keyStrokeEvent({key:t}){try{const{isActiveModal:e}=this.boundingBoxState;this.isMouseDown||e||this.showDropdownLabelBox||!this._selectMetadata||this.annotateState.annotation>-1&&("Delete"===t||"Backspace"===t)&&this.deleteSelectedBbox()}catch(e){console.log(e)}}toggleEvent(t){try{this.annotateState.annotation>-1&&this.doubleClickEvent()}catch(e){console.log(e)}}mouseDown(t){try{if(this._boundingBoxCanvas.mouseClickWithinPointPath(this._selectMetadata,t)){if(this.isMouseDown=!0,this.boundingBoxState.drag&&(this.changeMouseCursorState({grabbing:!0}),this._boundingBoxCanvas.setPanXY(t.offsetX,t.offsetY)),this.boundingBoxState.draw){const e=this._boundingBoxCanvas.mouseDownDrawEnable(t.offsetX,t.offsetY,this._selectMetadata.bnd_box);this.annotateSelectChange({annotation:e,isDlbClick:!1}),this.redrawImage(this._selectMetadata)}}else this.isMouseDown=!1}catch(e){console.log(e)}}mouseUp(t){try{this.boundingBoxState.draw&&this.isMouseDown&&this.finishDrawBoundingBox(t),this._boundingBoxCanvas.mouseClickWithinPointPath(this._selectMetadata,t)&&(this.boundingBoxState.drag&&this.isMouseDown&&this._boundingBoxCanvas.setGlobalXY(this._selectMetadata.img_x,this._selectMetadata.img_y),this.isMouseDown=!1)}catch(e){console.log(e)}}mouseMove(t){try{if(this._selectMetadata)if(this._boundingBoxCanvas.mouseClickWithinPointPath(this._selectMetadata,t)){if(this.boundingBoxState.drag&&this.isMouseDown){const e=this._boundingBoxCanvas.getDiffXY(t);this._selectMetadata.img_x=e.diffX,this._selectMetadata.img_y=e.diffY,this._boundingBoxCanvas.panRectangle(this._selectMetadata.bnd_box,this._selectMetadata.img_x,this._selectMetadata.img_y,t=>{t&&Object(w.a)(this._selectMetadata)}),this.redrawImage(this._selectMetadata)}else this.boundingBoxState.drag&&!this.isMouseDown&&this.changeMouseCursorState({grab:!0});if(this.boundingBoxState.draw&&this.isMouseDown&&(this._boundingBoxCanvas.mouseMoveDrawEnable(t.offsetX,t.offsetY,this._selectMetadata),this.redrawImage(this._selectMetadata)),this.boundingBoxState.draw&&!this.isMouseDown){const{box:e,pos:n}=this._boundingBoxCanvas.getCurrentClickBox(t.offsetX,t.offsetY,this._selectMetadata.bnd_box);this.changeMouseCursorState(-1!==e?"tl"===n?{"nw-resize":!0}:"tr"===n?{"ne-resize":!0}:"bl"===n?{"sw-resize":!0}:"br"===n?{"se-resize":!0}:"l"===n||"r"===n?{"w-resize":!0}:"t"===n||"b"===n?{"n-resize":!0}:{move:!0}:{crosshair:!0})}}else this.changeMouseCursorState()}catch(e){console.log(e)}}}return t.\u0275fac=function(e){return new(e||t)(s.Hb(f),s.Hb(l),s.Hb(F),s.Hb(L.a),s.Hb(g.a),s.Hb(D))},t.\u0275cmp=s.Bb({type:t,selectors:[["video-labelling-object-detection"]],viewQuery:function(t,e){if(1&t&&(s.xc(T,!0),s.xc(X,!0),s.xc(Y,!0),s.xc(R,!0)),2&t){let t;s.ic(t=s.Vb())&&(e._videoTimelineRef=t.first),s.ic(t=s.Vb())&&(e.canvas=t.first),s.ic(t=s.Vb())&&(e.floatdiv=t.first),s.ic(t=s.Vb())&&(e.lbltypetxt=t.first)}},hostBindings:function(t,e){1&t&&s.Ub("keydown",function(t){return e.keyStrokeEvent(t)},!1,s.kc)("dblclick",function(t){return e.toggleEvent(t)})("mousedown",function(t){return e.mouseDown(t)})("mouseup",function(t){return e.mouseUp(t)})("mousemove",function(t){return e.mouseMove(t)})},inputs:{_totalFrame:"_totalFrame",_selectMetadata:"_selectMetadata"},outputs:{_onHide:"_onHide",_onChangeMetadata:"_onChangeMetadata"},features:[s.vb],decls:27,vars:13,consts:[[1,"floatdiv","unclosedOut",3,"hidden"],["floatdiv",""],["autocomplete","off","spellcheck","false",1,"unclosedOut"],["type","text",1,"lbltypetxt","unclosedOut",3,"ngClass","ngModel","ngModelOptions","ngModelChange","keydown.enter"],["lbltypetxt",""],[1,"availablelbl","unclosedOut"],["availablelbl",""],[1,"lblList","unclosedOut"],["class","lblElement unclosedOut",3,"click",4,"ngFor","ngForOf"],["class","unclosedOut notExist",4,"ngIf"],[1,"videoTimelineContainer"],[1,"canvas-container"],[1,"canvasstyle",3,"ngStyle"],["canvasdrawing",""],[1,"control-layout"],[1,"control-container"],[1,"time-container"],[1,"time-label"],[1,"control-icon-container"],["class","control-icon","src","assets/icons/Play.svg","alt","Play",3,"click",4,"ngIf"],["class","control-icon","src","assets/icons/Pause.svg","alt","Pause",3,"click",4,"ngIf"],["id","videoTimeline",1,"videoTimeline",3,"wheel"],["videoTimelineRef",""],[1,"table"],[1,"video-tbody"],[4,"ngFor","ngForOf"],[1,"lblElement","unclosedOut",3,"click"],[1,"lblName","unclosedOut"],[1,"lblCount","unclosedOut"],[1,"unclosedOut","notExist"],[1,"unclosedOut"],["src","assets/icons/Play.svg","alt","Play",1,"control-icon",3,"click"],["src","assets/icons/Pause.svg","alt","Pause",1,"control-icon",3,"click"],[1,"label-display"],[1,"eye-display",3,"click"],[3,"id","src"],[1,"tableTiming"],[3,"ngClass",4,"ngIf"],[3,"ngClass","click"],[3,"ngClass"]],template:function(t,e){1&t&&(s.Nb(0,"div",0,1),s.Nb(2,"form",2),s.Nb(3,"input",3,4),s.Ub("ngModelChange",function(t){return e.labelSearch=t})("ngModelChange",function(t){return e.labelTypeTextChange(t)})("keydown.enter",function(t){return e.validateInputLabel(t)}),s.Mb(),s.Mb(),s.Nb(5,"div",5,6),s.Nb(7,"ul",7),s.qc(8,U,5,2,"li",8),s.qc(9,W,7,6,"li",9),s.Mb(),s.Mb(),s.Mb(),s.Nb(10,"div",10),s.Nb(11,"div",11),s.Ib(12,"canvas",12,13),s.Mb(),s.Nb(14,"div",14),s.Nb(15,"div",15),s.Nb(16,"div",16),s.Nb(17,"label",17),s.sc(18,"00:00:00"),s.Mb(),s.Mb(),s.Nb(19,"div",18),s.qc(20,A,1,0,"img",19),s.qc(21,$,1,0,"img",20),s.Mb(),s.Mb(),s.Mb(),s.Nb(22,"div",21,22),s.Ub("wheel",function(t){return e.onScroll(t)}),s.Nb(24,"table",23),s.Nb(25,"tbody",24),s.qc(26,H,7,4,"tr",25),s.Mb(),s.Mb(),s.Mb(),s.Mb()),2&t&&(s.cc("hidden",!e.showDropdownLabelBox),s.xb(3),s.cc("ngClass",e.invalidInput?"invalidInput":"validInput")("ngModel",e.labelSearch)("ngModelOptions",s.fc(10,V)),s.xb(5),s.cc("ngForOf",e.labelList),s.xb(1),s.cc("ngIf",0===e.labelList.length),s.xb(3),s.cc("ngStyle",s.gc(11,K,e.currentCursor())),s.xb(8),s.cc("ngIf",!e.isPlayingFrame),s.xb(1),s.cc("ngIf",e.isPlayingFrame),s.xb(5),s.cc("ngForOf",e.labelledFrames))},directives:[I.n,I.g,I.h,I.a,i.j,I.f,I.i,i.k,i.l,i.m],pipes:[m.c],styles:[".videoTimelineContainer[_ngcontent-%COMP%]{height:100%;right:0;z-index:1000;width:97.8%;padding-top:2px;padding-right:60px;padding-left:2.2vw}.canvas-container[_ngcontent-%COMP%]{height:54vh}.active-frame-container[_ngcontent-%COMP%]{padding:38px;display:flex;justify-content:center}.videoTimeline[_ngcontent-%COMP%]{display:flex;text-align:center;font-size:12px;height:100%;overflow:hidden;background-color:#525353}.video-tbody[_ngcontent-%COMP%]{display:block;overflow:auto;height:300px;width:100%}.activeFrame[_ngcontent-%COMP%]{width:960px;height:480px}.timelineCell[_ngcontent-%COMP%]{border-radius:4px;display:inline-block;width:28px;height:20px;box-sizing:border-box;border:1px solid #121212;line-height:20px;font-size:11px;color:#1f2428;position:relative}.clickable[_ngcontent-%COMP%]{cursor:pointer}.clickable[_ngcontent-%COMP%]:hover{background-color:#293540}.figure1[_ngcontent-%COMP%]{background:#00f;border-width:0}.figure2[_ngcontent-%COMP%]{background:green;border-width:0}.cursor[_ngcontent-%COMP%]{border:2px solid red}.table[_ngcontent-%COMP%]{width:100%;table-layout:fixed}.active[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:red;background:#121212}.row[_ngcontent-%COMP%]{width:28px;padding:0;text-align:center;margin-bottom:4px}.tableTiming[_ngcontent-%COMP%]{font-size:10px;vertical-align:middle;color:snow;height:28px;width:28px}.control-container[_ngcontent-%COMP%], .control-layout[_ngcontent-%COMP%]{background-color:#525353}.control-container[_ngcontent-%COMP%]{padding:.7vh 1vw 0 .5vw;border-bottom:1px solid #000;height:5vh;width:9.6vw;display:flex}.control-icon-container[_ngcontent-%COMP%]{padding:0 .4vw}.control-icon[_ngcontent-%COMP%]{padding-top:.5vh;height:70%}.time-container[_ngcontent-%COMP%]{padding-right:1vw}.time-label[_ngcontent-%COMP%]{font-size:1.7vw;color:#768dff}.label-display[_ngcontent-%COMP%]{width:7.5vw;color:#fff;text-align:left}.eye-display[_ngcontent-%COMP%]{width:50px;color:#fff;border-right:2px solid #000;padding-right:1vh}.canvasstyle[_ngcontent-%COMP%]{position:fixed;left:2.2vw;right:auto;top:8vh;overflow:scroll;scrollbar-width:none;margin:0;padding:0;outline:none;border:none}.floatdiv[_ngcontent-%COMP%]{position:absolute;z-index:10000}.lbltypetxt[_ngcontent-%COMP%]{width:11vw;height:4vh;color:snow;font-size:2vh;background-color:#000;outline:none;border-radius:.2vh;border:.2vw solid grey;border-bottom:none;padding:0;text-indent:.4vw}.invalidInput[_ngcontent-%COMP%]{border:.2vw solid red}.validInput[_ngcontent-%COMP%]{border:.2vw solid grey}.availablelbl[_ngcontent-%COMP%]{background-color:#000;width:11vw;height:15vh;color:snow;font-size:2vh;font-weight:700;outline:none;border-radius:.2vh;border:.2vw solid grey;border-top:.1vh dotted snow;overflow:auto;scrollbar-width:none}.availablelbl[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.lblList[_ngcontent-%COMP%]{padding:0 .2vw}.lblElement[_ngcontent-%COMP%]{list-style-type:none;margin:.3vh 0;padding:0;justify-content:space-between;display:flex}.lblElement[_ngcontent-%COMP%]:hover{background-color:#111}.lblName[_ngcontent-%COMP%]{margin-left:.2vw;overflow:hidden;text-overflow:ellipsis}.lblCount[_ngcontent-%COMP%]{background-color:#222;margin-right:.2vw;padding:.1vh .2vw;border-radius:.2vw}.notExist[_ngcontent-%COMP%]{color:#999;font-size:1.5vh}"]}),t})();function Z(t,e){if(1&t&&(s.Lb(0),s.Nb(1,"div",3),s.Nb(2,"label"),s.Nb(3,"img",4),s.Ub("click",function(){return e.$implicit.onClick()}),s.Xb(4,"translate"),s.Mb(),s.Mb(),s.Mb(),s.Kb()),2&t){const t=e.$implicit,n=e.index,i=s.Wb();s.xb(3),s.pc(t.style),s.cc("ngClass",i.conditionalIconTheme())("src",t.imgPath,s.nc)("alt",t.alt)("title",s.Yb(4,7,t.hoverLabel)),s.yb("data-index",n)}}let Q=(()=>{class t{constructor(){this._onClick=new s.n,this.isFolderTabOpen=!1,this.conditionalIconTheme=()=>"utility-icon-light",this.jsonSchema={logos:[{imgPath:"assets/icons/folder.svg",hoverLabel:"rightSideBar.folderOrFiles",alt:"Folder",onClick:()=>this._onClick.emit({name:"project",closed:!1})},{imgPath:"assets/icons/tag.svg",hoverLabel:"rightSideBar.label",alt:"Label",onClick:()=>this._onClick.emit({name:"label",closed:!1})},{imgPath:"assets/icons/bounding_box.svg",hoverLabel:"rightSideBar.annotation",alt:"Annotation",onClick:()=>this._onClick.emit({name:"annotation",closed:!1})},{imgPath:"assets/icons/statistic.svg",hoverLabel:"rightSideBar.statistic",alt:"Statistic",onClick:()=>null},{imgPath:"assets/icons/export.svg",hoverLabel:"rightSideBar.export",alt:"Export",style:"padding: 1.5vh 0.5vw;",onClick:()=>null},{imgPath:"assets/icons/reload.svg",hoverLabel:"rightSideBar.reload",alt:"Reload",style:"padding: 1.5vh 0.5vw;",onClick:()=>null}]}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Bb({type:t,selectors:[["video-labelling-right-sidebar"]],outputs:{_onClick:"_onClick"},decls:3,vars:1,consts:[[1,"utility-right-sidebar-container"],[1,"utility-inner-container"],[4,"ngFor","ngForOf"],[1,"utility-icon-container"],[3,"ngClass","src","alt","title","click"]],template:function(t,e){1&t&&(s.Nb(0,"div",0),s.Nb(1,"div",1),s.qc(2,Z,5,9,"ng-container",2),s.Mb(),s.Mb()),2&t&&(s.xb(2),s.cc("ngForOf",e.jsonSchema.logos))},directives:[i.k,i.j],pipes:[m.c],styles:[".utility-right-sidebar-container[_ngcontent-%COMP%]{position:absolute;top:4.5vh;min-width:2.2vw;max-width:2.2vw;min-height:95.5vh;max-height:95.5vh;background:#525353;border:.0625vw solid hsla(0,0%,100%,.25);z-index:1000}.utility-inner-container[_ngcontent-%COMP%]{min-width:2.2vw;max-width:2.2vw;position:absolute}.utility-icon-container[_ngcontent-%COMP%], .utility-inner-container[_ngcontent-%COMP%]{min-height:5vh;max-height:5vh}.utility-icon-light[_ngcontent-%COMP%]{min-width:1.5vw;max-width:1.5vw;min-height:3vh;max-height:3vh;padding:.3vw;position:absolute;cursor:pointer}.utility-icon-light[_ngcontent-%COMP%]:active, .utility-icon-light[_ngcontent-%COMP%]:focus{background:#a9a9a9}.input-none[_ngcontent-%COMP%]{display:none}"]}),t})();var tt=n("Muja");const et=function(t,e){return{i:t,tab:e}};function nt(t,e){if(1&t&&(s.Lb(0),s.Nb(1,"div",9),s.Jb(2,10),s.Mb(),s.Kb()),2&t){const t=e.$implicit,n=e.index,i=s.Wb(2),o=s.jc(2),a=s.jc(4);s.xb(1),s.cc("ngClass",i.checkCloseToggle(t)),s.yb("data-index",n),s.xb(1),s.cc("ngTemplateOutlet",0===n?o:a)("ngTemplateOutletContext",s.hc(4,et,n,t))}}function it(t,e){if(1&t&&(s.Nb(0,"div",7),s.qc(1,nt,3,7,"ng-container",8),s.Mb()),2&t){const t=s.Wb();s.xb(1),s.cc("ngForOf",t._tabStatus)}}function ot(t,e){if(1&t){const t=s.Ob();s.Nb(0,"label",11),s.sc(1),s.Xb(2,"translate"),s.Mb(),s.Nb(3,"div",12),s.Nb(4,"span",13),s.Nb(5,"div",14),s.Ub("click",function(){s.lc(t);const n=e.tab;return s.Wb().onClose(n)}),s.sc(6,"\u2716"),s.Mb(),s.Mb(),s.Mb(),s.Nb(7,"div",15,16),s.Nb(9,"div",17),s.Nb(10,"p"),s.sc(11,"project"),s.Mb(),s.Nb(12,"p"),s.sc(13,"project"),s.Mb(),s.Nb(14,"p"),s.sc(15,"project"),s.Mb(),s.Nb(16,"p"),s.sc(17,"project"),s.Mb(),s.Nb(18,"p"),s.sc(19,"project"),s.Mb(),s.Nb(20,"p"),s.sc(21,"project"),s.Mb(),s.Nb(22,"p"),s.sc(23,"project"),s.Mb(),s.Nb(24,"p"),s.sc(25,"project"),s.Mb(),s.Nb(26,"p"),s.sc(27,"project"),s.Mb(),s.Nb(28,"p"),s.sc(29,"project"),s.Mb(),s.Nb(30,"p"),s.sc(31,"project"),s.Mb(),s.Nb(32,"p"),s.sc(33,"project"),s.Mb(),s.Nb(34,"p"),s.sc(35,"project"),s.Mb(),s.Nb(36,"p"),s.sc(37,"project"),s.Mb(),s.Nb(38,"p"),s.sc(39,"project"),s.Mb(),s.Mb(),s.Mb()}if(2&t){const t=e.tab;s.xb(1),s.uc(" ",s.Yb(2,1,t.name)," ")}}function at(t,e){if(1&t&&s.Jb(0,10),2&t){const t=e.i,n=e.tab;s.Wb();const i=s.jc(6),o=s.jc(8);s.cc("ngTemplateOutlet",1===t?i:o)("ngTemplateOutletContext",s.hc(2,et,t,n))}}function rt(t,e){if(1&t){const t=s.Ob();s.Nb(0,"label",11),s.sc(1),s.Xb(2,"translate"),s.Mb(),s.Nb(3,"div",12),s.Nb(4,"span",13),s.Nb(5,"div",14),s.Ub("click",function(){s.lc(t);const n=e.tab;return s.Wb().onClose(n)}),s.sc(6,"\u2716"),s.Mb(),s.Mb(),s.Mb(),s.Nb(7,"div",18),s.Nb(8,"div",17),s.Nb(9,"p"),s.sc(10,"label"),s.Mb(),s.Nb(11,"p"),s.sc(12,"label"),s.Mb(),s.Nb(13,"p"),s.sc(14,"label"),s.Mb(),s.Nb(15,"p"),s.sc(16,"label"),s.Mb(),s.Nb(17,"p"),s.sc(18,"label"),s.Mb(),s.Nb(19,"p"),s.sc(20,"label"),s.Mb(),s.Nb(21,"p"),s.sc(22,"label"),s.Mb(),s.Nb(23,"p"),s.sc(24,"label"),s.Mb(),s.Nb(25,"p"),s.sc(26,"label"),s.Mb(),s.Nb(27,"p"),s.sc(28,"label"),s.Mb(),s.Nb(29,"p"),s.sc(30,"label"),s.Mb(),s.Nb(31,"p"),s.sc(32,"label"),s.Mb(),s.Nb(33,"p"),s.sc(34,"label"),s.Mb(),s.Nb(35,"p"),s.sc(36,"label"),s.Mb(),s.Nb(37,"p"),s.sc(38,"label"),s.Mb(),s.Mb(),s.Mb()}if(2&t){const t=e.tab;s.xb(1),s.tc(s.Yb(2,1,t.name))}}const st=function(t){return{annotation:t}};function ct(t,e){if(1&t&&(s.Lb(0),s.Jb(1,10),s.Kb()),2&t){const t=e.$implicit;s.Wb(3);const n=s.jc(10),i=s.jc(12);s.xb(1),s.cc("ngTemplateOutlet",t.bnd_box?n:i)("ngTemplateOutletContext",s.gc(2,st,t))}}function lt(t,e){if(1&t&&(s.Lb(0),s.qc(1,ct,2,4,"ng-container",8),s.Kb()),2&t){const t=s.Wb().tab;s.xb(1),s.cc("ngForOf",t.annotation)}}function ht(t,e){if(1&t){const t=s.Ob();s.Nb(0,"label",11),s.sc(1),s.Xb(2,"translate"),s.Mb(),s.Nb(3,"div",12),s.Nb(4,"span",13),s.Nb(5,"div",14),s.Ub("click",function(){s.lc(t);const n=e.tab;return s.Wb().onClose(n)}),s.sc(6,"\u2716"),s.Mb(),s.Mb(),s.Mb(),s.Nb(7,"div",19),s.Nb(8,"div",17),s.Nb(9,"div",20),s.qc(10,lt,2,1,"ng-container",21),s.Mb(),s.Mb(),s.Mb()}if(2&t){const t=e.tab;s.xb(1),s.tc(s.Yb(2,2,t.name)),s.xb(9),s.cc("ngIf",null==t?null:t.annotation)}}function dt(t,e){1&t&&(s.Lb(0),s.Nb(1,"div",17),s.Nb(2,"p"),s.sc(3,"project"),s.Mb(),s.Nb(4,"p"),s.sc(5,"project"),s.Mb(),s.Nb(6,"p"),s.sc(7,"project"),s.Mb(),s.Nb(8,"p"),s.sc(9,"project"),s.Mb(),s.Nb(10,"p"),s.sc(11,"project"),s.Mb(),s.Nb(12,"p"),s.sc(13,"project"),s.Mb(),s.Nb(14,"p"),s.sc(15,"project"),s.Mb(),s.Nb(16,"p"),s.sc(17,"project"),s.Mb(),s.Nb(18,"p"),s.sc(19,"project"),s.Mb(),s.Nb(20,"p"),s.sc(21,"project"),s.Mb(),s.Nb(22,"p"),s.sc(23,"project"),s.Mb(),s.Nb(24,"p"),s.sc(25,"project"),s.Mb(),s.Nb(26,"p"),s.sc(27,"project"),s.Mb(),s.Nb(28,"p"),s.sc(29,"project"),s.Mb(),s.Nb(30,"p"),s.sc(31,"project"),s.Mb(),s.Mb(),s.Kb())}function gt(t,e){1&t&&(s.Lb(0),s.Nb(1,"div",17),s.Nb(2,"p"),s.sc(3,"project"),s.Mb(),s.Nb(4,"p"),s.sc(5,"project"),s.Mb(),s.Nb(6,"p"),s.sc(7,"project"),s.Mb(),s.Nb(8,"p"),s.sc(9,"project"),s.Mb(),s.Nb(10,"p"),s.sc(11,"project"),s.Mb(),s.Nb(12,"p"),s.sc(13,"project"),s.Mb(),s.Nb(14,"p"),s.sc(15,"project"),s.Mb(),s.Nb(16,"p"),s.sc(17,"project"),s.Mb(),s.Nb(18,"p"),s.sc(19,"project"),s.Mb(),s.Nb(20,"p"),s.sc(21,"project"),s.Mb(),s.Nb(22,"p"),s.sc(23,"project"),s.Mb(),s.Nb(24,"p"),s.sc(25,"project"),s.Mb(),s.Nb(26,"p"),s.sc(27,"project"),s.Mb(),s.Nb(28,"p"),s.sc(29,"project"),s.Mb(),s.Nb(30,"p"),s.sc(31,"project"),s.Mb(),s.Mb(),s.Kb())}let bt=(()=>{class t{constructor(){this._tabStatus=[],this._onClose=new s.n,this.isTabStillOpen=!0,this.onClose=t=>{this._onClose.emit(t)},this.checkCloseToggle=t=>{let e="";return"label"===t.name&&this._tabStatus[2].closed||"project"===t.name&&this._tabStatus[1].closed&&this._tabStatus[2].closed||"annotation"===t.name||(e="flex-content"),t.closed&&(e+=" closed"),e},this.checkStateEqual=(t,e)=>!Object(tt.a)(t,e)}ngOnInit(){}ngOnChanges(t){if(t._tabStatus&&this.checkStateEqual(t._tabStatus.currentValue,t._tabStatus.previousValue)){this.isTabStillOpen=!1;for(const{closed:t}of this._tabStatus)if(!t){this.isTabStillOpen=!0;break}}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Bb({type:t,selectors:[["video-labelling-project"]],inputs:{_tabStatus:"_tabStatus"},outputs:{_onClose:"_onClose"},features:[s.vb],decls:13,vars:1,consts:[["class","tab-container",4,"ngIf"],["thumbnailTab",""],["nonThumbnailTab",""],["labelTab",""],["annotationTab",""],["boundingBox",""],["polygon",""],[1,"tab-container"],[4,"ngFor","ngForOf"],[1,"utility-right-project-container","tab","flex-fill-remaining",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"tab-name"],[1,"flex-tab-icons"],[1,"tab-close-thumbnailless"],[1,"div-close",3,"click"],["id","thumbnailList",1,"utility-inner-container","tab-height","scroll"],["thumbnailList",""],[1,"flex-item"],["id","inner-container",1,"utility-inner-container","tab-height","scroll"],["id","inner-container",1,"utility-inner-container","scroll","tab-smaller-height"],[1,"flex-center-width"],[4,"ngIf"]],template:function(t,e){1&t&&(s.qc(0,it,2,1,"div",0),s.qc(1,ot,40,3,"ng-template",null,1,s.rc),s.qc(3,at,1,5,"ng-template",null,2,s.rc),s.qc(5,rt,39,3,"ng-template",null,3,s.rc),s.qc(7,ht,11,4,"ng-template",null,4,s.rc),s.qc(9,dt,32,0,"ng-template",null,5,s.rc),s.qc(11,gt,32,0,"ng-template",null,6,s.rc)),2&t&&s.cc("ngIf",e.isTabStillOpen)},directives:[i.l,i.k,i.j,i.o],pipes:[m.c],styles:['.tab-container[_ngcontent-%COMP%]{display:flex;flex-flow:column;height:100%;right:0;position:fixed;min-width:18.5vw;max-width:18.5vw}.utility-right-project-container[_ngcontent-%COMP%]{height:100%;min-width:16.3vw;max-width:16.3vw;background:#383535;border:.0325vw solid hsla(0,0%,100%,.25);border-top:none;z-index:1000;align-items:stretch}.utility-right-project-container[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;min-width:8.5vw;max-width:8.5vw;min-height:4vh;max-height:4vh;background:#383535;z-index:-1;font-size:1.5vh;line-height:3vh;color:#fff;padding:.5vh 0 0 2vw}.tab[_ngcontent-%COMP%]{position:sticky;overflow:hidden}.tab[_ngcontent-%COMP%]:before{position:absolute;content:"";top:4vh;min-width:100vw;max-width:100vw;min-height:93vh;max-height:93vh;background:#383535;z-index:-1}.flex-fixed[_ngcontent-%COMP%]{flex:0 1 25vh}.flex-fill-remaining[_ngcontent-%COMP%]{flex:1 1 auto}.flex-content[_ngcontent-%COMP%]{display:flex;flex-flow:column;height:33%;min-height:10%;flex-shrink:0;flex-grow:0;resize:vertical}.tab-name[_ngcontent-%COMP%]{font-size:1.7vh;padding:.5vw 2vw 0 1vw;display:inline-block;color:#fff;position:absolute}.tab-close-thumbnail[_ngcontent-%COMP%]{margin-left:3vw;justify-content:center}.tab-close-thumbnail[_ngcontent-%COMP%], .tab-close-thumbnailless[_ngcontent-%COMP%]{float:right;vertical-align:middle;min-height:4vh;max-height:4vh;color:#696969;font-size:1.8vh;line-height:4vh;text-align:center;display:inline-grid;padding-bottom:1vh}.tab-close-thumbnailless[_ngcontent-%COMP%]{flex:1 0 60%;justify-content:right}.div-close[_ngcontent-%COMP%]{margin-right:.5vw;min-width:1.6vw;max-width:1.6vw;min-height:4vh;max-height:4vh;color:#fff;cursor:pointer;text-align:center;float:right}.div-close[_ngcontent-%COMP%]:active{background:grey}.utility-inner-container[_ngcontent-%COMP%]{padding:2.5vh 0 0 .2vw;scroll-behavior:smooth;overflow:hidden auto;z-index:100;min-width:15.5vw;max-width:15.5vw}.tab-height[_ngcontent-%COMP%]{height:85%}.tab-smaller-height[_ngcontent-%COMP%]{height:60%}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 6px rgba(0,0,0,.3);border-radius:10px;background-color:#000}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5vw}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#525353}.img-container[_ngcontent-%COMP%], .utility-icon-container[_ngcontent-%COMP%]{min-height:5vh;max-height:5vh}.img-container[_ngcontent-%COMP%]{font-size:1.5vh;color:#fff;display:flex;flex-direction:row;justify-content:flex-start;align-items:center;cursor:pointer;margin:0 .3vw;padding:.1vh .4vw}.img-container[_ngcontent-%COMP%]:hover{background-color:#444;border-radius:2px}.img-selected[_ngcontent-%COMP%]{background:#555}.img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block}.img[_ngcontent-%COMP%], .img-skeleton[_ngcontent-%COMP%]{max-height:4.3vh;min-height:4.3vh;max-width:3vw}.img-skeleton[_ngcontent-%COMP%]{min-width:3vw;border:.005vh dotted #525353}.img-name[_ngcontent-%COMP%]{margin-left:.5vw;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%}.closed[_ngcontent-%COMP%]{display:none}.utility-icon-dark[_ngcontent-%COMP%], .utility-icon-light[_ngcontent-%COMP%]{min-width:1.5vw;max-width:1.5vw;min-height:3vh;max-height:3vh;padding:.3vw;position:absolute}.flex-item[_ngcontent-%COMP%]{align-items:center;flex-direction:column;font-size:1.5vh;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.flex-center-width[_ngcontent-%COMP%], .flex-item[_ngcontent-%COMP%]{display:flex;justify-content:center}.flex-center-width[_ngcontent-%COMP%]{width:90%;flex-wrap:wrap}.label[_ngcontent-%COMP%]{flex:1 1 80%;display:flex;justify-content:flex-start;margin:.25vh 0}.pointer[_ngcontent-%COMP%]{cursor:pointer}.annotation-active[_ngcontent-%COMP%], .label-active[_ngcontent-%COMP%]{border:.15vw solid #ff0}.utility-info-btn[_ngcontent-%COMP%]{font-size:1vw;min-width:0;max-width:0;min-height:2.5vh;max-height:2.5vh;line-height:0;right:21vh;position:absolute;background:#383535;border:none;color:#fff}.flex-tab-icons[_ngcontent-%COMP%]{display:flex;width:100%}.extra-icons[_ngcontent-%COMP%]{cursor:pointer}.extra-icons[_ngcontent-%COMP%]:active{background:grey}.tab-extra-icons[_ngcontent-%COMP%]{float:right;vertical-align:middle;font-size:1.7vh;line-height:4vh;text-align:center;color:#fff;flex:1 0 15%;justify-content:flex-start}.tab-text[_ngcontent-%COMP%]{font-size:1.7vh;min-width:6vw;max-width:6vw}.inner-content[_ngcontent-%COMP%]{max-height:25vh;min-height:25vh;min-width:3vw;max-width:3vw}.div-input[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin:.5vh .9vw}.input[_ngcontent-%COMP%]{border-radius:8vw;border:none;outline:none;padding:.3vw 0 .3vw 1vw;min-height:1.5vh;max-height:1.5vh;min-width:13vw;max-width:13vw;font-size:1.3vh;background:#525353;color:#fff}.input-invalid[_ngcontent-%COMP%]{border:.2vw solid red}.img-path[_ngcontent-%COMP%]{margin-top:4vh}.indicator[_ngcontent-%COMP%]{background-color:#75fe7c}.indicator[_ngcontent-%COMP%], .no-indicator[_ngcontent-%COMP%]{height:1vh;width:.5vw;border-radius:50%;position:relative}.no-indicator[_ngcontent-%COMP%]{background-color:#ffba54}.not-exist[_ngcontent-%COMP%]{font-size:1.5vh;color:#999}.delete-annotation[_ngcontent-%COMP%], .delete-label[_ngcontent-%COMP%]{position:absolute;right:2vw}.open-all-tabs[_ngcontent-%COMP%]{cursor:pointer;padding:.2vh .2vw;border-radius:.7vw}.open-all-tabs[_ngcontent-%COMP%]:hover{background:#636363}.open-all-tabs[_ngcontent-%COMP%]:active, .open-all-tabs[_ngcontent-%COMP%]:focus{background:#737474}.tab-skeleton[_ngcontent-%COMP%]{position:absolute;height:100vh;width:16.5vw;background:#525353;border-left:.0625vw solid hsla(0,0%,100%,.25);text-align:center;color:#cac8c8;font-size:2vh}.choose-tab[_ngcontent-%COMP%]{margin-top:42vh}.thumbnail-actions[_ngcontent-%COMP%]{text-align:end;padding-right:1vw;width:10vw}.thumbnail-actions-icon[_ngcontent-%COMP%]{border-radius:50%;padding:.2vh}.thumbnail-actions-icon[_ngcontent-%COMP%]:hover{background:#555}']}),t})();const ut=[{path:"",component:(()=>{class t{constructor(){this.tabStatus=[{name:"project",closed:!0},{name:"label",closed:!0},{name:"annotation",closed:!0}],this.onToggleTab=t=>{this.tabStatus.forEach(e=>{e.name===t.name&&(e.closed=!e.closed)})},this.onChangeMetadata=t=>{console.log(t)},this.selectedMetaData={img_x:0,img_y:0,img_w:960,img_h:540,img_ori_h:1920,img_ori_w:1080,img_path:"path",img_thumbnail:"",project_name:"project name",uuid:"1234",bnd_box:[],img_depth:void 0,file_size:12345,polygons:void 0}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Bb({type:t,selectors:[["app-video-labelling-layout"]],decls:8,vars:2,consts:[[1,"layout-container"],[1,"content-container"],[3,"_selectMetadata","_onChangeMetadata"],[3,"_onClick"],[3,"_tabStatus","_onClose"]],template:function(t,e){1&t&&(s.Nb(0,"div",0),s.Nb(1,"div"),s.Ib(2,"page-header"),s.Mb(),s.Nb(3,"div",1),s.Ib(4,"video-labelling-left-sidebar"),s.Nb(5,"video-labelling-object-detection",2),s.Ub("_onChangeMetadata",function(t){return e.onChangeMetadata(t)}),s.Mb(),s.Nb(6,"video-labelling-right-sidebar",3),s.Ub("_onClick",function(t){return e.onToggleTab(t)}),s.Mb(),s.Nb(7,"video-labelling-project",4),s.Ub("_onClose",function(t){return e.onToggleTab(t)}),s.Mb(),s.Mb(),s.Mb()),2&t&&(s.xb(5),s.cc("_selectMetadata",e.selectedMetaData),s.xb(2),s.cc("_tabStatus",e.tabStatus))},directives:[d.a,x,J,Q,bt],styles:['.layout-container[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.content-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;min-width:97.8vw;max-width:97.8vw}.modal-button[_ngcontent-%COMP%]{line-height:1vh;font-size:1vw;padding:.5vw;background:#262a2e;color:azure}.close-button[_ngcontent-%COMP%]{border:none;cursor:pointer}.float-right[_ngcontent-%COMP%]{float:right}.font-title[_ngcontent-%COMP%]{font-size:1.7vw}.font-label[_ngcontent-%COMP%]{line-height:4vh;font-size:1vw;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.main-label-container[_ngcontent-%COMP%]{min-width:35vw;max-width:35vw}.main-label-container[_ngcontent-%COMP%], .sub-label-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.sub-label-container[_ngcontent-%COMP%]{min-width:40vw;max-width:40vw}.sub-label-flex-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1 1 100%;min-width:0}.static-select[_ngcontent-%COMP%]{min-height:4vh;max-height:4vh;min-width:10vw;max-width:10vw;line-height:3vh;font-size:.9vw;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:5vh;margin:0;-moz-text-align-last:center;text-align-last:center;background:#262a2e;color:#fff;box-shadow:inset -.5vw 6.25vw 1vw 0 rgba(0,0,0,.2),inset -.5vw -.5vw 1vw 0 hsla(0,0%,100%,.4)}.static-select[_ngcontent-%COMP%]:hover{box-shadow:inset -.375vw -.375vw .625vw 0 rgba(0,0,0,.2),inset .375vw .375vw .625vw 0 hsla(0,0%,100%,.5)}.static-select[_ngcontent-%COMP%]:active{box-shadow:inset .375vw .375vw .625vw 0 rgba(0,0,0,.2),inset -.375vw -.375vw .625vw 0 hsla(0,0%,100%,.5)}.static-input[_ngcontent-%COMP%]{min-height:4vh;max-height:4vh;min-width:10vw;max-width:10vw;line-height:3vh;font-size:.9vw;border-radius:2vw;border:none;outline:none;background-color:#363636;color:#fff;padding:0 1vw}.hr-line[_ngcontent-%COMP%]{margin:5vh 0}.sub-label-padding[_ngcontent-%COMP%]{padding:0 0 2vh}.validate-msg[_ngcontent-%COMP%]{color:red;font-size:1vw}.flex-first[_ngcontent-%COMP%]{flex:1 1 35%}.flex-second[_ngcontent-%COMP%]{flex:1 1 55%}.flex-third[_ngcontent-%COMP%]{flex:0 0 5%}.flex-fourth[_ngcontent-%COMP%]{line-height:1vh;font-size:1vw;padding:.5vw;background:#262a2e;color:azure;flex:0 0 5%}.modal[_ngcontent-%COMP%]{z-index:1000;padding-top:10vh;top:0;width:100%;height:100%;overflow:auto;background-color:transparent;scrollbar-width:none;position:fixed;background:rgba(0,0,0,.8)}.modal-content[_ngcontent-%COMP%]{background-color:#525353;padding:1vw;max-width:20vw;min-width:20vw;border-radius:1vw;margin:15vh auto auto}.modal-content-container[_ngcontent-%COMP%]{margin-left:1.3vw}.modal-content-header[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:3vh}.modal-button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:1vw 1vw 1vw 2vw}.modal-button-cancel[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.export-content-container[_ngcontent-%COMP%]{margin-left:.5vw}.button-style[_ngcontent-%COMP%]{border-radius:1vh;border:none;outline:none;color:#fff;cursor:pointer}.confg-btn[_ngcontent-%COMP%]{margin-right:.7vw}.confg-btn[_ngcontent-%COMP%], .confgdata-btn[_ngcontent-%COMP%]{padding:1vh .5vw;background-color:#2d8ceb;font-size:2vh;min-width:7.5vw}.cancel-btn[_ngcontent-%COMP%], .with-data[_ngcontent-%COMP%]{font-size:1.5vh}.cancel-btn[_ngcontent-%COMP%]{padding:1vh 1vw;background-color:#444}.error-msg[_ngcontent-%COMP%]{padding-top:1vh;font-size:2vh}.help-icon[_ngcontent-%COMP%]{height:3vh}.help-icon-container[_ngcontent-%COMP%]{padding-right:1vw;padding-left:.4vw}.help-icon-container[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{visibility:hidden;width:15vw;background-color:#000;color:#fff;text-align:left;border-radius:6px;padding:1vh .5vw;position:absolute;top:65%;margin-left:-60px;text-align:justify;text-justify:inter-word}.help-icon-container[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible}.message[_ngcontent-%COMP%]{font-size:1vw;overflow-wrap:break-word}.modal-message-container[_ngcontent-%COMP%]{padding-right:3.5vw}.break[_ngcontent-%COMP%]{overflow-wrap:break-word}.save-format-list[_ngcontent-%COMP%]{left:0;top:0;width:100%;height:100%;overflow:auto}.save-format-content[_ngcontent-%COMP%]{margin:auto;padding:10px}.switch-container[_ngcontent-%COMP%]{font-size:small;align-content:center;text-align:center}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:4em;height:1.8em;margin-left:auto;margin-right:auto}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.switch[_ngcontent-%COMP%]   .checkBox[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background:#000;background-size:100% 100%;background-position:50%}.switch[_ngcontent-%COMP%]   .checkBox[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translateX(2.2em)}.switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.8s}.switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:1.6em;width:1.6em;left:.14em;bottom:.15em;background-color:snow;transition:.8s}.switch[_ngcontent-%COMP%]   .round[_ngcontent-%COMP%]{border-radius:1.2em}.switch[_ngcontent-%COMP%]   .round[_ngcontent-%COMP%]:before{border-radius:50%}.switch[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:8px;margin-top:.5em;outline:none}.switch-2[_ngcontent-%COMP%]{position:relative;display:inline-block;width:2.5em;height:1.2em;margin-left:auto;margin-right:auto}.switch-2[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.switch-2[_ngcontent-%COMP%]   .checkBox[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background:#000;background-size:100% 100%;background-position:50%}.switch-2[_ngcontent-%COMP%]   .checkBox[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translateX(1.5em)}.switch-2[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.5s}.switch-2[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:1.2em;width:1.2em;left:.14em;background-color:snow;transition:.5s}.switch-2[_ngcontent-%COMP%]   .round[_ngcontent-%COMP%]{border-radius:1.2em}.switch-2[_ngcontent-%COMP%]   .round[_ngcontent-%COMP%]:before{border-radius:50%}.switch-2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:8px;margin-top:.5em;outline:none}.no-margin-left[_ngcontent-%COMP%]{margin-left:0}.space-verticle[_ngcontent-%COMP%]{background-color:transparent;outline:none;border:none;margin-left:1.5em;margin-right:1.5em}.save-format-btn[_ngcontent-%COMP%]{width:90%;height:6em;margin-top:2%;margin-bottom:2%;margin-left:4.5%;background:#000;background-size:100% 100%;background-position:50%;font-size:medium;outline:none;border:none;color:snow;overflow:hidden;border-radius:5px}.save-format-btn[_ngcontent-%COMP%]:hover{text-shadow:0 0 30px #888;box-shadow:5px 5px 10px #888,-5px -5px 10px #888;cursor:pointer}.save-format-btn[_ngcontent-%COMP%]:active:hover{border:3px dashed green}.adv-settings[_ngcontent-%COMP%]{padding:1vh;margin:1vh 1.5vw;color:#ccc;font-size:.6vw;cursor:pointer;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;background:#30353a;border-radius:.5vh;float:right}.adv-settings[_ngcontent-%COMP%]:hover{background:#373d42}.modal-adv-container[_ngcontent-%COMP%]{margin:1vh 1vw}.modal-adv-instruction[_ngcontent-%COMP%]{color:#fff;opacity:.5}.modal-adv-label[_ngcontent-%COMP%]{font-size:1.5vh;margin-left:2vw;white-space:nowrap;width:9vw;overflow:hidden;text-overflow:ellipsis;display:inline-block}.modal-adv-btn[_ngcontent-%COMP%]{float:right;padding:.5vh 1vw;background-color:#2d8ceb;font-size:1.5vh;min-width:3vw}.shortcut-key-info-header[_ngcontent-%COMP%]{font-size:1.2vw;color:#fff;text-align:center;margin-bottom:2vh}.table-box[_ngcontent-%COMP%]{width:100%;height:90%;overflow-y:auto}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border-collapse:collapse;text-align:center;color:#fff}th[_ngcontent-%COMP%]{top:0;background:#262a2e;color:#fff;border-top:none!important}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){color:#bebebe}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:60px;text-align:center;background:#262a2e}.validation-error[_ngcontent-%COMP%]{margin:1px;color:red}.validation-success[_ngcontent-%COMP%]{margin:1px;color:green}.label[_ngcontent-%COMP%]{color:#fff;font-size:2vh;margin-right:1vw}.label-file[_ngcontent-%COMP%]{padding-top:.5vh}.margin-bottom[_ngcontent-%COMP%]{margin-bottom:.5vh}.deleteimg-btn[_ngcontent-%COMP%], .renameimg-btn[_ngcontent-%COMP%]{padding:1vh .5vw;background-color:#2d8ceb;margin-top:.7vw;margin-right:.7vw;font-size:2vh;min-width:7.5vw;float:right}.font-delete-img[_ngcontent-%COMP%]{line-height:4vh;font-size:1vw}.checkbox[_ngcontent-%COMP%]{height:1.5vh;width:1.5vw}']}),t})()},{path:"upload",component:h}];let ft=(()=>{class t{}return t.\u0275mod=s.Fb({type:t}),t.\u0275inj=s.Eb({factory:function(e){return new(e||t)},imports:[[a.d.forChild(ut)]]}),t})(),mt=(()=>{class t{}return t.\u0275mod=s.Fb({type:t}),t.\u0275inj=s.Eb({factory:function(e){return new(e||t)},imports:[[i.b,o.a,m.b]]}),t})(),pt=(()=>{class t{}return t.\u0275mod=s.Fb({type:t}),t.\u0275inj=s.Eb({factory:function(e){return new(e||t)},imports:[[i.b,o.a,ft,mt]]}),t})()},WrcE:function(t,e,n){const i=n("PhXl");t.exports=async t=>{let e=t;if(void 0===t)return new Uint8Array;if("string"==typeof t)if(/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(t))e=atob(t.split(",")[1]).split("").map(t=>t.charCodeAt(0));else{const n=await fetch(i(t));e=await n.arrayBuffer()}else(t instanceof File||t instanceof Blob)&&(e=await(n=t,new Promise((t,e)=>{const i=new FileReader;i.onload=()=>{t(i.result)},i.onerror=({target:{error:{code:t}}})=>{e(Error("File could not be read! Code="+t))},i.readAsArrayBuffer(n)})));var n;return new Uint8Array(e)}},Z8XC:function(t){t.exports=JSON.parse('{"_args":[["@ffmpeg/ffmpeg@0.10.1","G:\\\\Certifai\\\\Classifai_FrontEnd"]],"_from":"@ffmpeg/ffmpeg@0.10.1","_id":"@ffmpeg/ffmpeg@0.10.1","_inBundle":false,"_integrity":"sha512-ChQkH7Rh57hmVo1LhfQFibWX/xqneolJKSwItwZdKPcLZuKigtYAYDIvB55pDfP17VtR1R77SxgkB2/UApB+Og==","_location":"/@ffmpeg/ffmpeg","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"@ffmpeg/ffmpeg@0.10.1","name":"@ffmpeg/ffmpeg","escapedName":"@ffmpeg%2fffmpeg","scope":"@ffmpeg","rawSpec":"0.10.1","saveSpec":null,"fetchSpec":"0.10.1"},"_requiredBy":["/"],"_resolved":"https://registry.npmjs.org/@ffmpeg/ffmpeg/-/ffmpeg-0.10.1.tgz","_spec":"0.10.1","_where":"G:\\\\Certifai\\\\Classifai_FrontEnd","author":{"name":"Jerome Wu","email":"jeromewus@gmail.com"},"browser":{"./src/node/index.js":"./src/browser/index.js"},"bugs":{"url":"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},"dependencies":{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},"description":"FFmpeg WebAssembly version","devDependencies":{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.10.0","@types/emscripten":"^1.39.4","babel-loader":"^8.1.0","chai":"^4.2.0","cors":"^2.8.5","eslint":"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1","express":"^4.17.1","mocha":"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0","webpack":"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"},"directories":{"example":"examples"},"engines":{"node":">=12.16.1"},"homepage":"https://github.com/ffmpegwasm/ffmpeg.wasm#readme","keywords":["ffmpeg","WebAssembly","video"],"license":"MIT","main":"src/index.js","name":"@ffmpeg/ffmpeg","repository":{"type":"git","url":"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},"scripts":{"build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","lint":"eslint src","prepublishOnly":"npm run build","start":"node scripts/server.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html","test:node":"node --experimental-wasm-threads --experimental-wasm-bulk-memory node_modules/.bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","wait":"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js"},"types":"src/index.d.ts","version":"0.10.1"}')},bP5C:function(t,e,n){n("PhXl");const{devDependencies:i}=n("Z8XC");t.exports={corePath:`https://unpkg.com/@ffmpeg/core@${i["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`}},kI6T:function(t,e){let n=!1,i=()=>{};t.exports={logging:n,setLogging:t=>{n=t},setCustomLogger:t=>{i=t},log:(t,e)=>{i({type:t,message:e}),n&&console.log(`[${t}] ${e}`)}}},kRDC:function(t,e,n){n("ls82");const i=n("lCMN"),{fetchFile:o}=n("uN/h");t.exports={createFFmpeg:i,fetchFile:o}},lCMN:function(t,e,n){const{defaultArgs:i,baseOptions:o}=n("xLGt"),{setLogging:a,setCustomLogger:r,log:s}=n("kI6T"),c=n("8cPH"),l=n("G9FC"),{defaultOptions:h,getCreateFFmpegCore:d}=n("uN/h"),{version:g}=n("Z8XC"),b=Error("ffmpeg.wasm is not ready, make sure you have completed load().");t.exports=(t={})=>{const{log:e,logger:n,progress:u,...f}={...o,...h,...t};let m=null,p=null,v=null,x=!1,w=u;const _=({type:t,message:e})=>{s(t,e),c(e,w),(t=>{"FFMPEG_END"===t&&null!==v&&(v(),v=null,x=!1)})(e)};return a(e),r(n),s("info","use ffmpeg.wasm v"+g),{setProgress:t=>{w=t},setLogger:t=>{r(t)},setLogging:a,load:async()=>{if(s("info","load ffmpeg-core"),null!==m)throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.");{s("info","loading ffmpeg-core");const{createFFmpegCore:t,corePath:e,workerPath:n,wasmPath:i}=await d(f);m=await t({mainScriptUrlOrBlob:e,printErr:t=>_({type:"fferr",message:t}),print:t=>_({type:"ffout",message:t}),locateFile:(t,e)=>{if("undefined"!=typeof window){if(void 0!==i&&t.endsWith("ffmpeg-core.wasm"))return i;if(void 0!==n&&t.endsWith("ffmpeg-core.worker.js"))return n}return e+t}}),p=m.cwrap("proxy_main","number",["number","number"]),s("info","ffmpeg-core loaded")}},isLoaded:()=>null!==m,run:(...t)=>{if(s("info","run ffmpeg command: "+t.join(" ")),null===m)throw b;if(x)throw Error("ffmpeg.wasm can only run one command at a time");return x=!0,new Promise(e=>{const n=[...i,...t].filter(t=>0!==t.length);v=e,p(...l(m,n))})},exit:()=>{if(null===m)throw b;x=!1,m.exit(1),m=null,p=null,v=null},FS:(t,...e)=>{if(s("info",`run FS.${t} ${e.map(t=>"string"==typeof t?t:`<${t.length} bytes binary file>`).join(" ")}`),null===m)throw b;{let i=null;try{i=m.FS[t](...e)}catch(n){throw"readdir"===t?Error(`ffmpeg.FS('readdir', '${e[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`):"readFile"===t?Error(`ffmpeg.FS('readFile', '${e[0]}') error. Check if the path exists`):Error("Oops, something went wrong in FS operation.")}return i}}}}},ls82:function(t,e,n){var i=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",r=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(P){s=function(t,e,n){return t[e]=n}}function c(t,e,n,i){var o=Object.create((e&&e.prototype instanceof d?e:d).prototype),a=new C(i||[]);return o._invoke=function(t,e,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var r=n.delegate;if(r){var s=w(r,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=l(t,e,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(P){return{type:"throw",arg:P}}}t.wrap=c;var h={};function d(){}function g(){}function b(){}var u={};u[o]=function(){return this};var f=Object.getPrototypeOf,m=f&&f(f(y([])));m&&m!==e&&n.call(m,o)&&(u=m);var p=b.prototype=d.prototype=Object.create(u);function v(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function x(t,e){function i(o,a,r,s){var c=l(t[o],t,a);if("throw"!==c.type){var h=c.arg,d=h.value;return d&&"object"==typeof d&&n.call(d,"__await")?e.resolve(d.__await).then(function(t){i("next",t,r,s)},function(t){i("throw",t,r,s)}):e.resolve(d).then(function(t){h.value=t,r(h)},function(t){return i("throw",t,r,s)})}s(c.arg)}var o;this._invoke=function(t,n){function a(){return new e(function(e,o){i(t,n,e,o)})}return o=o?o.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=l(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function y(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function e(){for(;++i<t.length;)if(n.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return g.prototype=p.constructor=b,b.constructor=g,g.displayName=s(b,r,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,r,"GeneratorFunction")),t.prototype=Object.create(p),t},t.awrap=function(t){return{__await:t}},v(x.prototype),x.prototype[a]=function(){return this},t.AsyncIterator=x,t.async=function(e,n,i,o,a){void 0===a&&(a=Promise);var r=new x(c(e,n,i,o),a);return t.isGeneratorFunction(n)?r:r.next().then(function(t){return t.done?t.value:r.next()})},v(p),s(p,r,"Generator"),p[o]=function(){return this},p.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=y,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(n,i){return r.type="throw",r.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],r=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=t,r.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var o=i.arg;M(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:y(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}(t.exports);try{regeneratorRuntime=i}catch(o){Function("r","regeneratorRuntime = r")(i)}},"uN/h":function(t,e,n){const i=n("bP5C"),o=n("Ji6A"),a=n("WrcE");t.exports={defaultOptions:i,getCreateFFmpegCore:o,fetchFile:a}},xLGt:function(t,e){t.exports={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}}}}]);