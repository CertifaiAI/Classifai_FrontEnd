!function(){function t(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||d(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function n(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach(function(e){i(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function r(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=d(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw r}}}}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e,n,i,o,r,a){try{var c=t[r](a),s=c.value}catch(l){return void n(l)}c.done?e(s):Promise.resolve(s).then(i,o)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var r=t.apply(e,n);function a(t){l(r,i,o,a,c,"next",t)}function c(t){l(r,i,o,a,c,"throw",t)}a(void 0)})}}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,o=!1,r=void 0;try{for(var a,c=t[Symbol.iterator]();!(i=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(s){o=!0,r=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw r}}return n}(t,e)||d(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){if(t){if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(t,e):void 0}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"8cPH":function(t,e){var n=0,i=0,o=function(t){var e=h(t.split(":"),3),n=e[0],i=e[1],o=e[2];return 60*parseFloat(n)*60+60*parseFloat(i)+parseFloat(o)};t.exports=function(t,e){if("string"==typeof t)if(t.startsWith("  Duration")){var r=t.split(", ")[0].split(": ")[1],a=o(r);e({duration:a,ratio:i}),(0===n||n>a)&&(n=a)}else if(t.startsWith("frame")||t.startsWith("size")){var c=t.split("time=")[1].split(" ")[0],s=o(c);e({ratio:i=s/n,time:s})}else t.startsWith("video:")&&(e({ratio:1}),n=0)}},G9FC:function(t,e){t.exports=function(t,e){var n=t._malloc(e.length*Uint32Array.BYTES_PER_ELEMENT);return e.forEach(function(e,i){var o=t._malloc(e.length+1);t.writeAsciiToMemory(e,o),t.setValue(n+Uint32Array.BYTES_PER_ELEMENT*i,o,"i32")}),[e.length,n]}},Ji6A:function(t,e,n){var i=n("PhXl"),o=n("kI6T").log,r=function(){var t=u(regeneratorRuntime.mark(function t(e,n){var i,r,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o("info","fetch "+e),t.next=3,fetch(e);case 3:return t.next=5,t.sent.arrayBuffer();case 5:return i=t.sent,o("info","".concat(e," file size = ").concat(i.byteLength," bytes")),r=new Blob([i],{type:n}),a=URL.createObjectURL(r),t.abrupt("return",(o("info","".concat(e," blob URL = ").concat(a)),a));case 9:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}();t.exports=function(){var t=u(regeneratorRuntime.mark(function t(e){var n,a,c,s,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof(n=e.corePath)){t.next=3;break}throw Error("corePath should be a string!");case 3:return a=i(n),t.next=6,r(a,"application/javascript");case 6:return c=t.sent,t.next=9,r(a.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm");case 9:return s=t.sent,t.next=12,r(a.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");case 12:return l=t.sent,t.abrupt("return","undefined"==typeof createFFmpegCore?new Promise(function(t){var e=document.createElement("script");e.src=c,e.type="text/javascript",e.addEventListener("load",function n(){e.removeEventListener("load",n),o("info","ffmpeg-core.js script loaded"),t({createFFmpegCore:createFFmpegCore,corePath:c,wasmPath:s,workerPath:l})}),document.getElementsByTagName("head")[0].appendChild(e)}):(o("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore:createFFmpegCore,corePath:c,wasmPath:s,workerPath:l})));case 14:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},PhXl:function(t,e,n){var i,o;void 0===(o="function"==typeof(i=function(){return function(){var t=arguments.length;if(0===t)throw new Error("resolveUrl requires at least one argument; got none.");var e=document.createElement("base");if(e.href=arguments[0],1===t)return e.href;var n=document.getElementsByTagName("head")[0];n.insertBefore(e,n.firstChild);for(var i,o=document.createElement("a"),r=1;r<t;r++)o.href=arguments[r],e.href=i=o.href;return n.removeChild(e),i}})?i.call(e,n,e,t):i)||(t.exports=o)},UdVg:function(t,e,n){"use strict";n.r(e),n.d(e,"VideoLabellingLayoutModule",function(){return Lt});var i,o,a,l=n("ofXK"),u=n("KZX/"),d=n("tyNb"),b=n("mrSG"),g=n("fXoL"),f=n("kRDC"),v=((o=function t(){var e=this;s(this,t),this.bolbList=[],this.videoToFrame=function(t,n){return Object(b.a)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var n,i,o,r,a,c,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(f.createFFmpeg)({log:!0,logger:function(t){try{if(console.log("logger: ",t),t.message.includes("Duration")){var e=t.message.split("Duration: ")[1].split(",")[0].split(":").map(function(t){return+t});s.videoDuration={hour:e[0],minute:e[1],second:e[2]}}}catch(n){}},progress:function(t){console.log("progress: ",t)}}),!t){e.next=26;break}return e.next=4,n.load();case 4:if(!(i=t)){e.next=26;break}return e.t0=n,e.next=9,Object(f.fetchFile)(i);case 9:return e.t1=e.sent,e.t0.FS.call(e.t0,"writeFile","in_%02d.mp4",e.t1),e.next=13,n.run("-i","in_%02d.mp4","-qscale:v","5","-vf","fps=1","out_%03d.jpg");case 13:o=1;case 14:e.prev=14,r=String(o).padStart(3,"0"),a=n.FS("readFile","out_".concat(r,".jpg")),c=URL.createObjectURL(new Blob([a.buffer],{type:"image/jpg"})),n.FS("unlink","out_".concat(r,".jpg")),this.bolbList.push({frameURL:c}),console.log(c),e.next=22;break;case 19:return e.prev=19,e.t2=e.catch(14),e.abrupt("break",25);case 22:o++,e.next=14;break;case 25:return e.abrupt("return",!0);case 26:case"end":return e.stop()}},e,this,[[14,19]])}))},this.getBlobList=function(){return e.bolbList}}).\u0275fac=function(t){return new(t||o)},o.\u0275prov=g.Db({token:o,factory:o.\u0275fac,providedIn:"root"}),o),m=((i=function(){function t(e,n){var i=this;s(this,t),this.frameExtractionService=e,this.router=n,this.videoSrc=null,this.statusText="",this.doDecode=function(){return Object(b.a)(i,void 0,void 0,regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.videoSrc){t.next=7;break}return e=this.frameExtractionService.videoToFrame(this.videoSrc,10),t.next=4,e;case 4:if(t.t0=t.sent,!t.t0){t.next=7;break}this.statusText="done";case 7:case"end":return t.stop()}},t,this)}))},this.onRedirect=function(){i.router.navigateByUrl("/videolbl/bndbox")}}return c(t,[{key:"ngOnInit",value:function(){}},{key:"handleFileInput",value:function(t){this.videoSrc=t.target.files.item(0)}}]),t}()).\u0275fac=function(t){return new(t||i)(g.Hb(v),g.Hb(d.a))},i.\u0275cmp=g.Bb({type:i,selectors:[["app-video-upload"]],decls:10,vars:1,consts:[["for","file"],["type","file","id","file",3,"change"],[3,"click"]],template:function(t,e){1&t&&(g.Nb(0,"label",0),g.sc(1,"Choose Video"),g.Mb(),g.Nb(2,"input",1),g.Ub("change",function(t){return e.handleFileInput(t)}),g.Mb(),g.Nb(3,"button",2),g.Ub("click",function(){return e.doDecode()}),g.sc(4,"Start"),g.Mb(),g.Nb(5,"button",2),g.Ub("click",function(){return e.onRedirect()}),g.sc(6,"Next"),g.Mb(),g.Nb(7,"p"),g.sc(8),g.Mb(),g.Ib(9,"hr")),2&t&&(g.xb(8),g.tc(e.statusText))},styles:["*[_ngcontent-%COMP%]{background-color:#fff}"]}),i),p=n("fll7"),x=n("GYuA"),w=n("2Vo4"),y={scroll:!1,drag:!1,draw:!1,fitCenter:!1,clear:!1,isActiveModal:!1,save:!1},_=((a=function t(){var e=this;s(this,t),this.actionSubject=new w.a(y),this.action$=this.actionSubject.asObservable(),this.setState=function(t){e.actionSubject.next(t?Object.assign(Object.assign({},y),t):y)}}).\u0275fac=function(t){return new(t||a)},a.\u0275prov=g.Db({token:a,factory:a.\u0275fac,providedIn:"root"}),a),M=n("sYmb");function C(t,e){if(1&t){var n=g.Ob();g.Lb(0),g.Nb(1,"img",4),g.Ub("click",function(){g.lc(n);var t=g.Wb(),e=t.index,i=t.$implicit;return g.Wb().getIndex(e),i.onClick()}),g.Xb(2,"translate"),g.Mb(),g.Kb()}if(2&t){var i=g.Wb(),o=i.$implicit,r=i.index,a=g.Wb();g.xb(1),g.cc("ngClass",a.conditionalIconTheme(!(null==o||!o.nonClickable)))("ngStyle",(null==o?null:o.toggleable)&&a.conditionalActiveIcon(r))("src",o.imgPath,g.nc)("alt",o.alt)("title",g.Yb(2,6,o.hoverLabel)),g.yb("data-index",r)}}function O(t,e){if(1&t&&(g.Lb(0),g.Nb(1,"div",2),g.qc(2,C,3,8,"ng-container",3),g.Mb(),g.Kb()),2&t){var n=e.$implicit;g.xb(2),g.cc("ngIf",n)}}var P,k=((P=function(){function t(e,n){var i=this;s(this,t),this._annotateService=e,this._videoLabelState=n,this.labelList=[],this.bindImagePath=function(){i.jsonSchema={logos:[{imgPath:"assets/icons/separator.svg",hoverLabel:"",alt:"",nonClickable:!0,toggleable:!1,onClick:function(){return null}},{imgPath:"assets/icons/pointer.svg",hoverLabel:"leftSideBar.pointer",alt:"Pointer",toggleable:!0,onClick:function(){i._videoLabelState.setState({draw:!1,drag:!0,scroll:!0})}},{imgPath:"assets/icons/rec_bounding_box.svg",hoverLabel:"leftSideBar.rectangularBB",alt:"RectangularBB",toggleable:!0,onClick:function(){i.resetSelectedAnnotate(),i._videoLabelState.setState({draw:!0,drag:!1,scroll:!1})}},{imgPath:"assets/icons/eraser.svg",hoverLabel:"leftSideBar.eraser",alt:"Eraser",toggleable:!1,onClick:function(){i.resetSelectedAnnotate(),i._videoLabelState.setState({draw:!1,drag:!1,clear:!0})}},{imgPath:"assets/icons/fit_center.svg",hoverLabel:"leftSideBar.fitCenter",alt:"Fit Center",toggleable:!1,onClick:function(){i.resetSelectedAnnotate(),i._videoLabelState.setState({draw:!1,drag:!1,fitCenter:!0,scroll:!1})}}]}},this.getIndex=function(t){i.iconIndex=t},this.resetSelectedAnnotate=function(){i._annotateService.setState()},this.conditionalIconTheme=function(t){return t?"plain-icon":"utility-icon-light"},this.conditionalActiveIcon=function(t){return t===i.iconIndex?{background:"rgb(59 59 59)"}:null}}return c(t,[{key:"ngOnInit",value:function(){this.bindImagePath()}},{key:"ngOnChanges",value:function(t){this.bindImagePath()}}]),t}()).\u0275fac=function(t){return new(t||P)(g.Hb(x.a),g.Hb(_))},P.\u0275cmp=g.Bb({type:P,selectors:[["video-labelling-left-sidebar"]],features:[g.vb],decls:2,vars:1,consts:[[1,"utility-left-sidebar-container"],[4,"ngFor","ngForOf"],[1,"utility-icon-container"],[4,"ngIf"],[3,"ngClass","ngStyle","src","alt","title","click"]],template:function(t,e){1&t&&(g.Nb(0,"div",0),g.qc(1,O,3,1,"ng-container",1),g.Mb()),2&t&&(g.xb(1),g.cc("ngForOf",e.jsonSchema.logos))},directives:[l.k,l.l,l.j,l.m],pipes:[M.c],styles:[".utility-left-sidebar-container[_ngcontent-%COMP%]{position:absolute;top:4.5vh;min-width:2.14vw;max-width:2.14vw;min-height:95.4vh;max-height:95.4vh;background:#525353;border:.0625vw solid hsla(0,0%,100%,.25);z-index:1000}.utility-icon-container[_ngcontent-%COMP%]{min-height:5vh;max-height:5vh;align-items:baseline}.utility-icon-light[_ngcontent-%COMP%]{min-width:1.5vw;max-width:1.5vw;min-height:3vh;max-height:3vh;padding:.3vw;position:absolute;cursor:pointer}.utility-icon-light[_ngcontent-%COMP%]:active, .utility-icon-light[_ngcontent-%COMP%]:focus{background:#a9a9a9}.plain-icon[_ngcontent-%COMP%]{min-width:1.5vw;max-width:1.5vw;min-height:3vh;max-height:3vh;padding:.3vw;position:absolute;cursor:auto}"]}),P),S=n("XIp8"),B=n("XNiG"),j=n("HDdC"),N=n("D0XW"),F=n("Y7HM"),L=n("z+Ro");function E(t){var e=t.index,n=t.period,i=t.subscriber;if(i.next(e),!i.closed){if(-1===n)return i.complete();t.index=e+1,this.schedule(t,n)}}var I,z,D=n("SxV6"),T=n("1G5W"),X=n("dYt1"),Y=n("rG2+"),R=((I=function(){function t(){s(this,t),this.globalXY={x:0,y:0},this.panXY={x:0,y:0},this.currentClickedBox={box:-1,pos:"o"},this.lineOffset=3,this.anchrSize=2.5,this.currentDrawing={x1:0,x2:0,y1:0,y2:0},this.currentSelectedBndBox=-1,this.util=new Y.a}return c(t,[{key:"getDiffXY",value:function(t){var e=t.offsetX,n=t.offsetY;try{var i={diffX:0,diffY:0};return i.diffX=this.globalXY.x+(e-this.panXY.x),i.diffY=this.globalXY.y+(n-this.panXY.y),i}catch(o){return console.log("ObjectDetection getDiffXY(offsetX: number,offsetY: number): { diffX: number; diffY: number }",o.name+": ",o.message),{diffX:-1,diffY:-1}}}},{key:"setCurrentX1Y1",value:function(t,e){try{null!==t&&null!==e&&void 0!==t&&void 0!==e&&(this.currentDrawing.x1=t,this.currentDrawing.y1=e)}catch(n){console.log("ObjectDetection setCurrentX1Y1(MouseX:number, MouseY:number):void",n.name+": ",n.message)}}},{key:"setCurrentX2Y2",value:function(t,e){try{null!==t&&null!==e&&void 0!==t&&void 0!==e&&(this.currentDrawing.x2=t,this.currentDrawing.y2=e)}catch(n){console.log("ObjectDetection setCurrentX2Y2(MouseX:number, MouseY:number):void",n.name+": ",n.message)}}},{key:"moveAllBbox",value:function(t,e,n,i){try{var o,a=r(t);try{for(a.s();!(o=a.n()).done;){var c=o.value,s=c.x2-c.x1,l=c.y2-c.y1;c.x1=Object(X.a)(e+c.distancetoImg.x),c.y1=Object(X.a)(n+c.distancetoImg.y),c.x2=Object(X.a)(c.x1+s),c.y2=Object(X.a)(c.y1+l)}}catch(u){a.e(u)}finally{a.f()}i&&i(!0)}catch(u){}}},{key:"calScaleTofitScreen",value:function(t,e,n,i){try{var o={factor:-1,newX:-1,newY:-1};return o.factor=Math.min(n/t,i/e),o.factor=o.factor-.05*o.factor,o.newX=n/2-t/2*o.factor,o.newY=i/2-e/2*o.factor,o}catch(r){return{factor:-1,newX:-1,newY:-1}}}},{key:"deleteSingleBox",value:function(t,e,n){try{t.splice(e,1),this.currentSelectedBndBox=-1,this.currentClickedBox={box:-1,pos:"o"},n(!0)}catch(i){}}},{key:"keyboardMoveBox",value:function(t,e,n,i){var o=n.img_w,r=n.img_h,a=n.img_x,c=n.img_y;try{switch(t){case"up":this.moveBoxWithinPointPath(a,c,o,r,0,-3,e)&&this.moveBbox(0,0,-3,-3,e);break;case"down":this.moveBoxWithinPointPath(a,c,o,r,0,3,e)&&this.moveBbox(0,0,3,3,e);break;case"left":this.moveBoxWithinPointPath(a,c,o,r,-3,0,e)&&this.moveBbox(-3,-3,0,0,e);break;case"right":this.moveBoxWithinPointPath(a,c,o,r,3,0,e)&&this.moveBbox(3,3,0,0,e)}i(!0)}catch(s){}}},{key:"moveBbox",value:function(t,e,n,i,o){o.x1+=t,o.x2+=e,o.y1+=n,o.y2+=i}},{key:"moveBoxWithinPointPath",value:function(t,e,n,i,o,r,a){try{return!(a.x1+o<t||a.x2+o>t+n||a.y1+r<e||a.y2+r>e+i)}catch(c){return console.log("ObjectDetection isWithinPointPath(imgx:number, imgy:number, imgw:number, imgh:number, addx:number, addy:number, box:Boundingbox):Boolean",c.name+": ",c.message),!1}}},{key:"mouseMoveBox",value:function(t,e,n){try{if(this.moveBoxWithinPointPath(n.img_x,n.img_y,n.img_w,n.img_h,t-this.currentDrawing.x1,e-this.currentDrawing.y1,n.bnd_box[this.currentSelectedBndBox])){this.setCurrentX2Y2(t,e);var i=this.currentDrawing.x2-this.currentDrawing.x1,o=this.currentDrawing.y2-this.currentDrawing.y1;this.setCurrentX1Y1(this.currentDrawing.x2,this.currentDrawing.y2),"i"!==this.currentClickedBox.pos&&"tl"!==this.currentClickedBox.pos&&"l"!==this.currentClickedBox.pos&&"bl"!==this.currentClickedBox.pos||(n.bnd_box[this.currentSelectedBndBox].x1+=i),"i"!==this.currentClickedBox.pos&&"tl"!==this.currentClickedBox.pos&&"t"!==this.currentClickedBox.pos&&"tr"!==this.currentClickedBox.pos||(n.bnd_box[this.currentSelectedBndBox].y1+=o),"i"!==this.currentClickedBox.pos&&"tr"!==this.currentClickedBox.pos&&"r"!==this.currentClickedBox.pos&&"br"!==this.currentClickedBox.pos||(n.bnd_box[this.currentSelectedBndBox].x2+=i),"i"!==this.currentClickedBox.pos&&"bl"!==this.currentClickedBox.pos&&"b"!==this.currentClickedBox.pos&&"br"!==this.currentClickedBox.pos||(n.bnd_box[this.currentSelectedBndBox].y2+=o)}}catch(r){console.log("ObjectDetection mouseMoveBox(MouseX:number, MouseY:number, CurrMeta:Metadata):void",r.name+": ",r.message)}}},{key:"getCurrentSelectedBox",value:function(){try{return this.currentSelectedBndBox}catch(t){return-1}}},{key:"setCurrentSelectedbBox",value:function(t){try{this.currentSelectedBndBox=t}catch(e){console.log("ObjectDetection setCurrentSelectedbBox(newNUM:number):void",e.name+": ",e.message)}}},{key:"mouseUpDrawEnable",value:function(t,e,n){try{var i={selBox:-1,isNew:!1};if(-1===this.currentClickedBox.box&&null!==this.tmpbox)t.bnd_box.push(this.tmpbox),this.currentSelectedBndBox=t.bnd_box.length-1,t.bnd_box[this.currentSelectedBndBox].label=e.length>0?e[0].name:"",i.isNew=!0,i.selBox=Object(X.a)(this.currentSelectedBndBox);else if(this.currentClickedBox.box>-1&&this.tmpbox){if(t.bnd_box[this.currentSelectedBndBox].x1>t.bnd_box[this.currentSelectedBndBox].x2){var o=Object(X.a)(t.bnd_box[this.currentSelectedBndBox].x1);t.bnd_box[this.currentSelectedBndBox].x1=Object(X.a)(t.bnd_box[this.currentSelectedBndBox].x2),t.bnd_box[this.currentSelectedBndBox].x2=o}if(t.bnd_box[this.currentSelectedBndBox].y1>t.bnd_box[this.currentSelectedBndBox].y2){var r=Object(X.a)(t.bnd_box[this.currentSelectedBndBox].y1);t.bnd_box[this.currentSelectedBndBox].y1=Object(X.a)(t.bnd_box[this.currentSelectedBndBox].y2),t.bnd_box[this.currentSelectedBndBox].y2=r}}return this.currentClickedBox={box:-1,pos:"o"},this.setCurrentX1Y1(0,0),this.setCurrentX2Y2(0,0),this.tmpbox=null,n(!0),i}catch(a){return console.log("ObjectDetection MouseUpDrawEnable(CurrMeta: Metadata): number",a.name+": ",a.message),{selBox:-1,isNew:!1}}}},{key:"panRectangle",value:function(t,e,n,i){try{var o,a=r(t);try{for(a.s();!(o=a.n()).done;){var c=o.value,s=c.x2-c.x1,l=c.y2-c.y1;c.x1=e+c.distancetoImg.x,c.y1=n+c.distancetoImg.y,c.x2=c.x1+s,c.y2=c.y1+l}}catch(u){a.e(u)}finally{a.f()}i(!0)}catch(u){console.log("ObjectDetection panRectangle(bbox:Boundingbox[], img_X:number, img_Y:number)",u.name+": ",u.message)}}},{key:"scaleAllBoxes",value:function(t,e,n,i,o){try{var a,c=r(e);try{for(c.s();!(a=c.n()).done;){var s=a.value,l=s.distancetoImg.x*t+n,u=s.distancetoImg.y*t+i,h=l+(s.x2-s.x1)*t,d=u+(s.y2-s.y1)*t;s.x1=Object(X.a)(l),s.y1=Object(X.a)(u),s.x2=Object(X.a)(h),s.y2=Object(X.a)(d);var b=s.x1-n,g=s.y1-i;s.distancetoImg.x=Object(X.a)(b),s.distancetoImg.y=Object(X.a)(g)}}catch(f){c.e(f)}finally{c.f()}o&&o(!0)}catch(f){console.log("ObjectDetection scaleAllBoxes(scalefactor: number,boxes:Boundingbox[],imgX:number,imgY:number)",f.name+": ",f.message)}}},{key:"mouseMoveDrawEnable",value:function(t,e,n){try{-1===this.currentClickedBox.box?this.setCurrentX2Y2(t,e):this.mouseMoveBox(t,e,n)}catch(i){console.log("ObjectDetection MouseMoveDrawEnable(MouseX: number,MouseY: number,SelectedMeta: Metadata): void",i.name+": ",i.message)}}},{key:"mouseDownDrawEnable",value:function(t,e,n){try{return this.getCurrentClickBox(t,e,n),this.setCurrentX1Y1(t,e),this.setCurrentX2Y2(t,e),this.currentClickedBox.box}catch(i){return console.log("ObjectDetection MouseDownDrawEnable(MouseX:number,MouseY:number,BBox:Boundingbox[]):number",i.name+": ",i.message),-1}}},{key:"setPanXY",value:function(t,e){try{return!(!t||!e||(this.panXY.x=t,this.panXY.y=e,0))}catch(n){return console.log("ObjectDetection setPanXY(newX: number, newY: number):boolean",n.name+": ",n.message),!1}}},{key:"setGlobalXY",value:function(t,e){try{return!(!t||!e||(this.globalXY.x=t,this.globalXY.y=e,0))}catch(n){return console.log("ObjectDetection SetGlobalXY(newX: number, newY: number):boolean",n.name+": ",n.message),!1}}},{key:"changeLabel",value:function(t,e){t&&e&&(t.label=e)}},{key:"mouseClickWithinPointPath",value:function(t,e){var n=t.img_x,i=t.img_y,o=t.img_w,r=t.img_h,a=e.offsetX,c=e.offsetY;try{return a>n&&a<n+o&&c>i&&c<i+r}catch(s){return console.log(s),!1}}},{key:"drawAllBoxOn",value:function(t,e,n){try{if(e.length>0){var i,o=r(e.entries());try{for(o.s();!(i=o.n()).done;){var a=h(i.value,2),c=a[0],s=a[1];this.setEachBbox(c===this.currentClickedBox.box||c===this.currentSelectedBndBox,t,s,n)}}catch(p){o.e(p)}finally{o.f()}}if(-1===this.currentClickedBox.box&&-1===this.currentSelectedBndBox){var l,u=r(e);try{for(u.s();!(l=u.n()).done;){var d=l.value;d.color="rgba(255,255,0,0.8)",this.drawEachBoxOn(t,d,n,!1)}}catch(p){u.e(p)}finally{u.f()}var b=this.currentDrawing,g=b.x1,f=b.x2,v=b.y1,m=b.y2;this.tmpbox=this.generateNewBox(g,f,v,m),this.tmpbox&&this.drawEachBoxOn(t,this.tmpbox,n,!0)}}catch(p){console.log("redraw(boundbox) ----\x3e ",p.name+": ",p.message)}}},{key:"setEachBbox",value:function(t,e,n,i){n.color=t?"rgba(0,255,0,1.0)":"rgba(255,255,0,0.8)",n.lineWidth=t?2:1,this.drawEachBoxOn(e,n,i,!!t)}},{key:"drawEachBoxOn",value:function(t,e,n,i){try{if(n){var o=e.x1+(e.x2-e.x1)/2,r=e.y1+(e.y2-e.y1)/2;n.strokeStyle="white",n.fillStyle="black",n.font="bold 12px Arial",""===e.label?(n.strokeText("",e.x1+10,e.y1+15),n.fillText("",e.x1+10,e.y1+15)):t.find(function(t){return t.name===e.label})?(n.strokeText(e.label,e.x1+10,e.y1+15),n.fillText(e.label,e.x1+10,e.y1+15)):(n.strokeText("Text",e.x1+10,e.y1+15),n.fillText("Text",e.x1+10,e.y1+15)),n.strokeStyle=e.color,n.beginPath(),n.rect(e.x1,e.y1,e.x2-e.x1,e.y2-e.y1),n.lineWidth=e.lineWidth,n.stroke(),n.fillStyle=e.color,i&&(n.beginPath(),n.fillRect(e.x1-this.anchrSize,e.y1-this.anchrSize,2*this.anchrSize,2*this.anchrSize),n.fillRect(e.x1-this.anchrSize,r-this.anchrSize,2*this.anchrSize,2*this.anchrSize),n.fillRect(e.x1-this.anchrSize,e.y2-this.anchrSize,2*this.anchrSize,2*this.anchrSize),n.fillRect(o-this.anchrSize,e.y1-this.anchrSize,2*this.anchrSize,2*this.anchrSize),n.fillRect(o-this.anchrSize,r-this.anchrSize,2*this.anchrSize,2*this.anchrSize),n.fillRect(o-this.anchrSize,e.y2-this.anchrSize,2*this.anchrSize,2*this.anchrSize),n.fillRect(e.x2-this.anchrSize,e.y1-this.anchrSize,2*this.anchrSize,2*this.anchrSize),n.fillRect(e.x2-this.anchrSize,r-this.anchrSize,2*this.anchrSize,2*this.anchrSize),n.fillRect(e.x2-this.anchrSize,e.y2-this.anchrSize,2*this.anchrSize,2*this.anchrSize))}}catch(a){console.log("ObjectDetection drawEachBoxOn(box:Boundingbox, context:CanvasRenderingContext2D, isSelected:boolean):void",a.name+": ",a.message)}}},{key:"generateNewBox",value:function(t,e,n,i){try{var o=t<e?t:e,r=n<i?n:i,a=t>e?t:e,c=n>i?n:i;return a-o>this.lineOffset&&c-r>this.lineOffset?{x1:o,y1:r,x2:a,y2:c,lineWidth:2,color:"rgba(0,255,0,1.0)",distancetoImg:{x:0,y:0},label:"",id:this.util.generateUniquesID()}:null}catch(s){return console.log("ObjectDetection GenerateNewBox(x1:number,x2:number,y1:number,y2:number):Boundingbox",s.name+": ",s.message),null}}},{key:"getBBoxDistfromImg",value:function(t,e,n){try{var i,o=r(t);try{for(o.s();!(i=o.n()).done;){var a=i.value,c=a.x1,s=a.y1,l=a.distancetoImg,u=c-e,h=s-n;l.x=Object(X.a)(u),l.y=Object(X.a)(h)}}catch(d){o.e(d)}finally{o.f()}}catch(d){console.log("ObjectDetection GetBBoxDistfromImg(bbox:Boundingbox[],imgX:number,imgY:number)",d.name+": ",d.message)}}},{key:"getCurrentClickBox",value:function(t,e,n){try{return this.currentClickedBox=this.mouseClickOnBoxes(t,e,n),this.currentClickedBox}catch(i){return console.log("ObjectDetection getCurrentClickBox(MouseX:number, MouseY:number, box:Boundingbox[]):{box:number,pos:string}",i.name+": ",i.message),{box:-1,pos:"o"}}}},{key:"mouseClickOnBoxes",value:function(t,e,n){try{for(var i=0;i<n.length;++i){var o=this.getPosition(t,e,n,n[i].x1+(n[i].x2-n[i].x1)/2,n[i].y1+(n[i].y2-n[i].y1)/2,i);if(""!==o)return{box:i,pos:o}}return{box:-1,pos:"o"}}catch(r){return console.log("ObjectDetection mouseClickOnBoxes(MouseX:number, MouseY:number, box:Boundingbox[]):{box:number,pos:string}",r.name+": ",r.message),{box:-1,pos:"o"}}}},{key:"getPosition",value:function(t,e,n,i,o,r){var a="";switch(this.getXPos(t,n,i,r)){case"l":a=this.getYLPos(e,n,o,r);break;case"r":a=this.getYRPos(e,n,o,r);break;case"m":a=this.getYMPos(e,n,o,r);break;case"i":n[r].y1-this.lineOffset<e&&e<n[r].y2+this.lineOffset&&(a="i")}return a}},{key:"getXPos",value:function(t,e,n,i){return e[i].x1-this.lineOffset<t&&t<e[i].x1+this.lineOffset?"l":e[i].x2-this.lineOffset<t&&t<e[i].x2+this.lineOffset?"r":n-this.lineOffset<t&&t<n+this.lineOffset?"m":e[i].x1-this.lineOffset<t&&t<e[i].x2+this.lineOffset?"i":"o"}},{key:"getYLPos",value:function(t,e,n,i){var o="";return e[i].y1-this.lineOffset<t&&t<e[i].y1+this.lineOffset?o="tl":e[i].y2-this.lineOffset<t&&t<e[i].y2+this.lineOffset?o="bl":n-this.lineOffset<t&&t<n+this.lineOffset&&(o="l"),o}},{key:"getYRPos",value:function(t,e,n,i){var o="";return e[i].y1-this.lineOffset<t&&t<e[i].y1+this.lineOffset?o="tr":e[i].y2-this.lineOffset<t&&t<e[i].y2+this.lineOffset?o="br":n-this.lineOffset<t&&t<n+this.lineOffset&&(o="r"),o}},{key:"getYMPos",value:function(t,e,n,i){var o="";return e[i].y1-this.lineOffset<t&&t<e[i].y1+this.lineOffset?o="t":e[i].y2-this.lineOffset<t&&t<e[i].y2+this.lineOffset?o="b":e[i].y1-this.lineOffset<t&&t<e[i].y2+this.lineOffset&&(o="i"),o}}]),t}()).\u0275fac=function(t){return new(t||I)},I.\u0275prov=g.Db({token:I,factory:I.\u0275fac,providedIn:"any"}),I),A=n("ww7h"),U=n("tk/3"),W=n("cxbk"),q=((z=function t(e,n){var i=this;s(this,t),this.http=e,this.router=n,this.hostPort=W.a.baseURL,this.getSingleFrameSrc=function(t){return i.http.get("".concat(i.hostPort,"video/frame/").concat(t))},this.frameExtraction=function(t){var e={headers:new U.e({"Content-Type":"application/json"}),body:{videoPath:t,saveFrameToFolder:!0}};return i.http.post(i.hostPort+"video/init",e)}}).\u0275fac=function(t){return new(t||z)(g.Rb(U.b),g.Rb(d.a))},z.\u0275prov=g.Db({token:z,factory:z.\u0275fac,providedIn:"any"}),z),G=n("3Pt+"),H=["videoTimelineRef"],V=["canvasdrawing"],$=["floatdiv"],K=["lbltypetxt"];function J(t,e){if(1&t){var n=g.Ob();g.Nb(0,"li",26),g.Ub("click",function(){g.lc(n);var t=e.$implicit;return g.Wb().labelNameClicked(t.name)}),g.Nb(1,"span",27),g.sc(2),g.Mb(),g.Nb(3,"span",28),g.sc(4),g.Mb(),g.Mb()}if(2&t){var i=e.$implicit;g.xb(2),g.tc(i.name),g.xb(2),g.tc(i.count)}}function Z(t,e){1&t&&(g.Nb(0,"li",29),g.Nb(1,"div",30),g.sc(2),g.Xb(3,"translate"),g.Mb(),g.Nb(4,"div",30),g.sc(5),g.Xb(6,"translate"),g.Mb(),g.Mb()),2&t&&(g.xb(2),g.tc(g.Yb(3,2,"searchLabel.labelNotExist")),g.xb(3),g.tc(g.Yb(6,4,"searchLabel.enterToAdd")))}function Q(t,e){if(1&t){var n=g.Ob();g.Nb(0,"img",31),g.Ub("click",function(){return g.lc(n),g.Wb().clickPlay()}),g.Mb()}}function tt(t,e){if(1&t){var n=g.Ob();g.Nb(0,"img",32),g.Ub("click",function(){return g.lc(n),g.Wb().clickPause()}),g.Mb()}}function et(t,e){if(1&t&&(g.Nb(0,"div",39),g.sc(1),g.Mb()),2&t){var n=g.Wb().index,i=g.Wb(2);g.cc("ngClass",i.activeFrame===n?"active row":null),g.xb(1),g.uc(" ",n," ")}}function nt(t,e){if(1&t){var n=g.Ob();g.Lb(0),g.Nb(1,"td",36),g.qc(2,et,2,2,"div",37),g.Nb(3,"div",38),g.Ub("click",function(){g.lc(n);var t=e.index;return g.Wb(2).onClickVideoTImeline(t)}),g.Mb(),g.Mb(),g.Kb()}if(2&t){var i=e.index,o=g.Wb(),r=o.index,a=o.$implicit,c=g.Wb();g.xb(2),g.cc("ngIf",0==r),g.xb(1),g.cc("ngClass",c.displayFrameIndicator(r,i,a.frame))}}function it(t,e){if(1&t){var n=g.Ob();g.Nb(0,"tr"),g.Nb(1,"td",33),g.Nb(2,"p"),g.sc(3),g.Mb(),g.Mb(),g.Nb(4,"td",34),g.Ub("click",function(){g.lc(n);var t=e.index;return g.Wb().onHide(t)}),g.Ib(5,"img",35),g.Mb(),g.qc(6,nt,4,2,"ng-container",25),g.Mb()}if(2&t){var i=e.$implicit,o=e.index,r=g.Wb();g.xb(3),g.tc(i.object),g.xb(2),g.ec("id","eye_",o,""),g.cc("src",i.isShow?r.showDetailsIcon:r.hideDetailsIcon,g.nc),g.xb(1),g.cc("ngForOf",r.totalFrameArr)}}var ot,rt=function(){return{standalone:!0}},at=function(t){return{cursor:t}},ct=((ot=function(){function t(e,n,i,o,r,a){var c=this;s(this,t),this._videoLblStateService=e,this.videoFrameExtractionService=n,this._boundingBoxCanvas=i,this._mouseCursorService=o,this._annotateSelectState=r,this._videoLblApiService=a,this.totalFrameArr=[{frameURL:"../../../assets/video_img/1.jpg"},{frameURL:"../../../assets/video_img/2.jpg"},{frameURL:"../../../assets/video_img/3.jpg"},{frameURL:"../../../assets/video_img/1.jpg"},{frameURL:"../../../assets/video_img/2.jpg"},{frameURL:"../../../assets/video_img/3.jpg"},{frameURL:"../../../assets/video_img/1.jpg"},{frameURL:"../../../assets/video_img/2.jpg"},{frameURL:"../../../assets/video_img/3.jpg"},{frameURL:"../../../assets/video_img/1.jpg"},{frameURL:"../../../assets/video_img/2.jpg"},{frameURL:"../../../assets/video_img/3.jpg"},{frameURL:"../../../assets/video_img/1.jpg"},{frameURL:"../../../assets/video_img/2.jpg"},{frameURL:"../../../assets/video_img/3.jpg"}],this.labelledFrames=[{frame:[1,2,3,4,5],object:"cat1",color:"blue",isShow:!0},{frame:[1],object:"cat2",color:"blue",isShow:!0}],this.labelList=[{name:"People",count:2},{name:"People 2",count:2}],this._totalFrame=this.totalFrameArr.length,this._onHide=new g.n,this._onChangeMetadata=new g.n,this.unsubscribe$=new B.a,this.showDropdownLabelBox=!1,this.invalidInput=!1,this.labelSearch="",this.occupiedSpace=[],this.activeFrame=0,this.activePreview=new Image,this.verticalScroll=!1,this.isPlayingFrame=!1,this.isPausingFrame=!0,this.pauseFrameIndex=0,this.isMouseDown=!1,this.showDetailsIcon="assets/icons/eye_show.svg",this.hideDetailsIcon="assets/icons/eye_hide.svg",this.onScroll=function(t){var e=t.deltaY;if(c.verticalScroll){c.clearCanvas();var n=c._videoTimelineRef.nativeElement.scrollLeft;void 0!==n&&c._videoTimelineRef.nativeElement.scrollTo(Object.assign({},e>0?{left:n+25}:{left:n-25})),e>0?c.activeFrame!==c._totalFrame-1&&(c.activeFrame+=1):0!==c.activeFrame&&(c.activeFrame-=1),c.activePreview.src=c.activeFrame>c.totalFrameArr.length?"":c.totalFrameArr[c.activeFrame].frameURL,c.canvasContext.drawImage(c.activePreview,0,0)}},this.displayFrameIndicator=function(t,e,n){var i="";return n.forEach(function(n){e===n&&(i+=t%2==0?" figure1 ":" figure2 ")}),i+=c.activeFrame===e&&" cursor row",i+=" timelineCell clickable"},this.onClickVideoTImeline=function(t){c.clearCanvas(),c.activeFrame=t,t>c.totalFrameArr.length?c._videoLblApiService.getSingleFrameSrc(c.totalFrameArr.length-1).pipe(Object(D.a)()).subscribe(function(t){console.log("res",t),c.activePreview.src=""},function(t){console.log("Retrieve Frame Error",t)}):c._videoLblApiService.getSingleFrameSrc(t).pipe(Object(D.a)()).subscribe(function(t){console.log("res",t),c.activePreview.src=""},function(t){console.log("Retrieve Frame Error",t)}),c.activePreview.onload=function(){c.canvasContext.drawImage(c.activePreview,0,0),c.imgFitToCenter()}},this.clickPlay=function(){c.isPlayingFrame=!0,c.isPausingFrame=!1;for(var t=!0,e=0,n=function(n){(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=-1;return Object(F.a)(e)?i=Number(e)<1?1:Number(e):Object(L.a)(e)&&(n=e),Object(L.a)(n)||(n=N.a),new j.a(function(e){var o=Object(F.a)(t)?t:+t-n.now();return n.schedule(E,o,{index:0,period:i,subscriber:e})})})(100*e).subscribe(function(e){t&&(c.isPausingFrame?(c.isPlayingFrame=!1,t=!1,c.pauseFrameIndex=n,console.log("Pausing...",n)):(console.log("Playing...",n),c.onClickVideoTImeline(n),n===c.totalFrameArr.length-1&&(c.isPlayingFrame=!1,c.isPausingFrame=!0,c.activeFrame=0)))}),e++},i=c.activeFrame;i<c.totalFrameArr.length;i++)n(i)},this.clickPause=function(){c.isPlayingFrame?c.isPausingFrame=!0:c.clickPlay()},this.onHide=function(t){c.labelledFrames[t].isShow=!c.labelledFrames[t].isShow,c._onHide.emit(c.labelledFrames[t])},this.validateInputLabel=function(t){var e=t.target.value;e.trim()&&(c.invalidInput=!1,c.showDropdownLabelBox=!1,c._selectMetadata.bnd_box[c.annotateState.annotation].label=e,c.labelSearch="")}}return c(t,[{key:"ngOnInit",value:function(){var t=this;this._videoLblApiService.frameExtraction("D:\\Certifai\\video\\1.mp4").pipe(Object(D.a)()).subscribe(function(t){console.log("frame extraction",t)},function(t){console.log("Retrieve Frame Error",t)}),this._videoLblStateService.action$.pipe(Object(T.a)(this.unsubscribe$)).subscribe(function(e){var n=e.clear,i=e.fitCenter,o=Object(b.b)(e,["clear","fitCenter"]);t.boundingBoxState=Object.assign(Object.assign({},o),{clear:n,fitCenter:i}),i&&t.imgFitToCenter(),n&&(t._selectMetadata.bnd_box=[],t.redrawImage(t._selectMetadata),t.emitMetadata())}),this._mouseCursorService.mouseCursor$.pipe(Object(T.a)(this.unsubscribe$)).subscribe(function(e){return t.mouseCursor=e}),this._annotateSelectState.labelStaging$.pipe(Object(T.a)(this.unsubscribe$)).subscribe(function(e){t.annotateState=e,console.log("state",e.annotation),t._boundingBoxCanvas.setCurrentSelectedbBox(e.annotation)})}},{key:"ngAfterViewInit",value:function(){var t=this;this.initializeCanvas(),this.activePreview.src=this.totalFrameArr[0].frameURL,this.activePreview.onload=function(){t.canvasContext.drawImage(t.activePreview,0,0),t.imgFitToCenter()}}},{key:"ngOnChanges",value:function(t){var e,n;(null===(e=t._selectMetadata)||void 0===e?void 0:e.previousValue)&&(null===(n=t._selectMetadata)||void 0===n?void 0:n.currentValue)&&this.redrawImage(this._selectMetadata)}},{key:"initializeCanvas",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"95%";this.canvas.nativeElement.style.width=t,this.canvas.nativeElement.style.height="50%",this.canvas.nativeElement.width=this.canvas.nativeElement.offsetWidth,this.canvas.nativeElement.height=this.canvas.nativeElement.offsetHeight,this.canvasContext=this.canvas.nativeElement.getContext("2d")}},{key:"onEraseBoundingBox",value:function(){this.clearCanvas(),this.canvasContext.beginPath(),this.canvasContext.drawImage(this.activePreview,0,0),this.imgFitToCenter()}},{key:"clearCanvas",value:function(){this.canvasContext.clearRect(0,0,this.canvas.nativeElement.width,this.canvas.nativeElement.height)}},{key:"changeMouseCursorState",value:function(t){this._mouseCursorService.setState(t)}},{key:"currentCursor",value:function(){return this._mouseCursorService.changeCursor(this.mouseCursor)}},{key:"imgFitToCenter",value:function(){try{var t=this._boundingBoxCanvas.calScaleTofitScreen(this._selectMetadata.img_w,this._selectMetadata.img_h,this.canvas.nativeElement.offsetWidth,this.canvas.nativeElement.offsetHeight);this._selectMetadata.img_w*=t.factor,this._selectMetadata.img_h*=t.factor,this._boundingBoxCanvas.scaleAllBoxes(t.factor,this._selectMetadata.bnd_box,this._selectMetadata.img_x,this._selectMetadata.img_y),this._selectMetadata.img_x=t.newX,this._selectMetadata.img_y=t.newY,this._boundingBoxCanvas.setGlobalXY(t.newX,t.newY),this._boundingBoxCanvas.moveAllBbox(this._selectMetadata.bnd_box,this._selectMetadata.img_x,this._selectMetadata.img_y),this.redrawImage(this._selectMetadata),this.canvasContext.canvas.style.transformOrigin="0 0",this.canvasContext.canvas.style.transform="scale(1, 1)"}catch(e){console.log(e)}}},{key:"redrawImage",value:function(t){var e=t.img_x,n=t.img_y,i=t.img_w,o=t.img_h;this.clearCanvas(),this.canvasContext.drawImage(this.activePreview,e,n,i,o),this._boundingBoxCanvas.drawAllBoxOn(this.labelList,this._selectMetadata.bnd_box,this.canvasContext)}},{key:"annotateSelectChange",value:function(t){this._annotateSelectState.setState(t)}},{key:"finishDrawBoundingBox",value:function(t){var e=this,n=this._boundingBoxCanvas.mouseUpDrawEnable(this._selectMetadata,this.labelList,function(t){t&&(e.getBBoxDistanceFromImage(),e.emitMetadata())});if(n.isNew||"mouseout"===t.type){var i=t.offsetY*(100/document.documentElement.clientHeight)+8.5,o=t.offsetX*(100/document.documentElement.clientWidth)+2.5;i<9&&(i=9),i>76&&(i=76),o<2.5&&(o=2.5),o>66&&(o=66),this.floatdiv.nativeElement.style.top=i.toString()+"vh",this.floatdiv.nativeElement.style.left=o.toString()+"vw",this.showDropdownLabelBox=!0,this.labelSearch="",this.invalidInput=!1,setTimeout(function(){e.lbltypetxt.nativeElement.focus()},100)}else this.showDropdownLabelBox=!1;n.isNew&&this.annotateSelectChange({annotation:n.selBox,isDlbClick:!1})}},{key:"getBBoxDistanceFromImage",value:function(){this._boundingBoxCanvas.getBBoxDistfromImg(this._selectMetadata.bnd_box,this._selectMetadata.img_x,this._selectMetadata.img_y)}},{key:"emitMetadata",value:function(){this._onChangeMetadata.emit(this._selectMetadata)}},{key:"labelNameClicked",value:function(t){this.showDropdownLabelBox=!1,this._selectMetadata.bnd_box[this.annotateState.annotation].label=t,this.labelledFrames.push({frame:[1],object:t,color:"blue",isShow:!0})}},{key:"labelTypeTextChange",value:function(t){console.log("label added"),this.labelList.filter(function(e){return e.name.includes(t)})}},{key:"deleteSelectedBbox",value:function(){var t=this;this._boundingBoxCanvas.deleteSingleBox(this._selectMetadata.bnd_box,this.annotateState.annotation,function(e){e&&(t.annotateSelectChange({annotation:-1,isDlbClick:!1}),t.redrawImage(t._selectMetadata),t.emitMetadata(),t.labelledFrames.map(function(e){t._selectMetadata.bnd_box[0].label===e.object&&e.frame.map(function(n,i){n===t.activeFrame&&delete e.frame[i]})}))})}},{key:"doubleClickEvent",value:function(){this.annotateSelectChange({annotation:this.annotateState.annotation,isDlbClick:!0})}},{key:"keyStrokeEvent",value:function(t){var e=t.key;try{var n=this.boundingBoxState.isActiveModal;this.isMouseDown||n||this.showDropdownLabelBox||!this._selectMetadata||this.annotateState.annotation>-1&&("Delete"===e||"Backspace"===e)&&this.deleteSelectedBbox()}catch(i){console.log(i)}}},{key:"toggleEvent",value:function(t){try{this.annotateState.annotation>-1&&this.doubleClickEvent()}catch(e){console.log(e)}}},{key:"mouseDown",value:function(t){try{if(this._boundingBoxCanvas.mouseClickWithinPointPath(this._selectMetadata,t)){if(this.isMouseDown=!0,this.boundingBoxState.drag&&(this.changeMouseCursorState({grabbing:!0}),this._boundingBoxCanvas.setPanXY(t.offsetX,t.offsetY)),this.boundingBoxState.draw){var e=this._boundingBoxCanvas.mouseDownDrawEnable(t.offsetX,t.offsetY,this._selectMetadata.bnd_box);this.annotateSelectChange({annotation:e,isDlbClick:!1}),this.redrawImage(this._selectMetadata)}}else this.isMouseDown=!1}catch(n){console.log(n)}}},{key:"mouseUp",value:function(t){try{this.boundingBoxState.draw&&this.isMouseDown&&this.finishDrawBoundingBox(t),this._boundingBoxCanvas.mouseClickWithinPointPath(this._selectMetadata,t)&&(this.boundingBoxState.drag&&this.isMouseDown&&this._boundingBoxCanvas.setGlobalXY(this._selectMetadata.img_x,this._selectMetadata.img_y),this.isMouseDown=!1)}catch(e){console.log(e)}}},{key:"mouseMove",value:function(t){var e=this;try{if(this._selectMetadata)if(this._boundingBoxCanvas.mouseClickWithinPointPath(this._selectMetadata,t)){if(this.boundingBoxState.drag&&this.isMouseDown){var n=this._boundingBoxCanvas.getDiffXY(t);this._selectMetadata.img_x=n.diffX,this._selectMetadata.img_y=n.diffY,this._boundingBoxCanvas.panRectangle(this._selectMetadata.bnd_box,this._selectMetadata.img_x,this._selectMetadata.img_y,function(t){t&&Object(S.a)(e._selectMetadata)}),this.redrawImage(this._selectMetadata)}else this.boundingBoxState.drag&&!this.isMouseDown&&this.changeMouseCursorState({grab:!0});if(this.boundingBoxState.draw&&this.isMouseDown&&(this._boundingBoxCanvas.mouseMoveDrawEnable(t.offsetX,t.offsetY,this._selectMetadata),this.redrawImage(this._selectMetadata)),this.boundingBoxState.draw&&!this.isMouseDown){var i=this._boundingBoxCanvas.getCurrentClickBox(t.offsetX,t.offsetY,this._selectMetadata.bnd_box),o=i.box,r=i.pos;this.changeMouseCursorState(-1!==o?"tl"===r?{"nw-resize":!0}:"tr"===r?{"ne-resize":!0}:"bl"===r?{"sw-resize":!0}:"br"===r?{"se-resize":!0}:"l"===r||"r"===r?{"w-resize":!0}:"t"===r||"b"===r?{"n-resize":!0}:{move:!0}:{crosshair:!0})}}else this.changeMouseCursorState()}catch(a){console.log(a)}}}]),t}()).\u0275fac=function(t){return new(t||ot)(g.Hb(_),g.Hb(v),g.Hb(R),g.Hb(A.a),g.Hb(x.a),g.Hb(q))},ot.\u0275cmp=g.Bb({type:ot,selectors:[["video-labelling-object-detection"]],viewQuery:function(t,e){var n;1&t&&(g.xc(H,!0),g.xc(V,!0),g.xc($,!0),g.xc(K,!0)),2&t&&(g.ic(n=g.Vb())&&(e._videoTimelineRef=n.first),g.ic(n=g.Vb())&&(e.canvas=n.first),g.ic(n=g.Vb())&&(e.floatdiv=n.first),g.ic(n=g.Vb())&&(e.lbltypetxt=n.first))},hostBindings:function(t,e){1&t&&g.Ub("keydown",function(t){return e.keyStrokeEvent(t)},!1,g.kc)("dblclick",function(t){return e.toggleEvent(t)})("mousedown",function(t){return e.mouseDown(t)})("mouseup",function(t){return e.mouseUp(t)})("mousemove",function(t){return e.mouseMove(t)})},inputs:{_totalFrame:"_totalFrame",_selectMetadata:"_selectMetadata"},outputs:{_onHide:"_onHide",_onChangeMetadata:"_onChangeMetadata"},features:[g.vb],decls:27,vars:13,consts:[[1,"floatdiv","unclosedOut",3,"hidden"],["floatdiv",""],["autocomplete","off","spellcheck","false",1,"unclosedOut"],["type","text",1,"lbltypetxt","unclosedOut",3,"ngClass","ngModel","ngModelOptions","ngModelChange","keydown.enter"],["lbltypetxt",""],[1,"availablelbl","unclosedOut"],["availablelbl",""],[1,"lblList","unclosedOut"],["class","lblElement unclosedOut",3,"click",4,"ngFor","ngForOf"],["class","unclosedOut notExist",4,"ngIf"],[1,"videoTimelineContainer"],[1,"canvas-container"],[1,"canvasstyle",3,"ngStyle"],["canvasdrawing",""],[1,"control-layout"],[1,"control-container"],[1,"time-container"],[1,"time-label"],[1,"control-icon-container"],["class","control-icon","src","assets/icons/Play.svg","alt","Play",3,"click",4,"ngIf"],["class","control-icon","src","assets/icons/Pause.svg","alt","Pause",3,"click",4,"ngIf"],["id","videoTimeline",1,"videoTimeline",3,"wheel"],["videoTimelineRef",""],[1,"table"],[1,"video-tbody"],[4,"ngFor","ngForOf"],[1,"lblElement","unclosedOut",3,"click"],[1,"lblName","unclosedOut"],[1,"lblCount","unclosedOut"],[1,"unclosedOut","notExist"],[1,"unclosedOut"],["src","assets/icons/Play.svg","alt","Play",1,"control-icon",3,"click"],["src","assets/icons/Pause.svg","alt","Pause",1,"control-icon",3,"click"],[1,"label-display"],[1,"eye-display",3,"click"],[3,"id","src"],[1,"tableTiming"],[3,"ngClass",4,"ngIf"],[3,"ngClass","click"],[3,"ngClass"]],template:function(t,e){1&t&&(g.Nb(0,"div",0,1),g.Nb(2,"form",2),g.Nb(3,"input",3,4),g.Ub("ngModelChange",function(t){return e.labelSearch=t})("ngModelChange",function(t){return e.labelTypeTextChange(t)})("keydown.enter",function(t){return e.validateInputLabel(t)}),g.Mb(),g.Mb(),g.Nb(5,"div",5,6),g.Nb(7,"ul",7),g.qc(8,J,5,2,"li",8),g.qc(9,Z,7,6,"li",9),g.Mb(),g.Mb(),g.Mb(),g.Nb(10,"div",10),g.Nb(11,"div",11),g.Ib(12,"canvas",12,13),g.Mb(),g.Nb(14,"div",14),g.Nb(15,"div",15),g.Nb(16,"div",16),g.Nb(17,"label",17),g.sc(18,"00:00:00"),g.Mb(),g.Mb(),g.Nb(19,"div",18),g.qc(20,Q,1,0,"img",19),g.qc(21,tt,1,0,"img",20),g.Mb(),g.Mb(),g.Mb(),g.Nb(22,"div",21,22),g.Ub("wheel",function(t){return e.onScroll(t)}),g.Nb(24,"table",23),g.Nb(25,"tbody",24),g.qc(26,it,7,4,"tr",25),g.Mb(),g.Mb(),g.Mb(),g.Mb()),2&t&&(g.cc("hidden",!e.showDropdownLabelBox),g.xb(3),g.cc("ngClass",e.invalidInput?"invalidInput":"validInput")("ngModel",e.labelSearch)("ngModelOptions",g.fc(10,rt)),g.xb(5),g.cc("ngForOf",e.labelList),g.xb(1),g.cc("ngIf",0===e.labelList.length),g.xb(3),g.cc("ngStyle",g.gc(11,at,e.currentCursor())),g.xb(8),g.cc("ngIf",!e.isPlayingFrame),g.xb(1),g.cc("ngIf",e.isPlayingFrame),g.xb(5),g.cc("ngForOf",e.labelledFrames))},directives:[G.n,G.g,G.h,G.a,l.j,G.f,G.i,l.k,l.l,l.m],pipes:[M.c],styles:[".videoTimelineContainer[_ngcontent-%COMP%]{height:100%;right:0;z-index:1000;width:97.8%;padding-top:2px;padding-right:60px;padding-left:2.2vw}.canvas-container[_ngcontent-%COMP%]{height:54vh}.active-frame-container[_ngcontent-%COMP%]{padding:38px;display:flex;justify-content:center}.videoTimeline[_ngcontent-%COMP%]{display:flex;text-align:center;font-size:12px;height:100%;overflow:hidden;background-color:#525353}.video-tbody[_ngcontent-%COMP%]{display:block;overflow:auto;height:300px;width:100%}.activeFrame[_ngcontent-%COMP%]{width:960px;height:480px}.timelineCell[_ngcontent-%COMP%]{border-radius:4px;display:inline-block;width:28px;height:20px;box-sizing:border-box;border:1px solid #121212;line-height:20px;font-size:11px;color:#1f2428;position:relative}.clickable[_ngcontent-%COMP%]{cursor:pointer}.clickable[_ngcontent-%COMP%]:hover{background-color:#293540}.figure1[_ngcontent-%COMP%]{background:#00f;border-width:0}.figure2[_ngcontent-%COMP%]{background:green;border-width:0}.cursor[_ngcontent-%COMP%]{border:2px solid red}.table[_ngcontent-%COMP%]{width:100%;table-layout:fixed}.active[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:red;background:#121212}.row[_ngcontent-%COMP%]{width:28px;padding:0;text-align:center;margin-bottom:4px}.tableTiming[_ngcontent-%COMP%]{font-size:10px;vertical-align:middle;color:snow;height:28px;width:28px}.control-container[_ngcontent-%COMP%], .control-layout[_ngcontent-%COMP%]{background-color:#525353}.control-container[_ngcontent-%COMP%]{padding:.7vh 1vw 0 .5vw;border-bottom:1px solid #000;height:5vh;width:9.6vw;display:flex}.control-icon-container[_ngcontent-%COMP%]{padding:0 .4vw}.control-icon[_ngcontent-%COMP%]{padding-top:.5vh;height:70%}.time-container[_ngcontent-%COMP%]{padding-right:1vw}.time-label[_ngcontent-%COMP%]{font-size:1.7vw;color:#768dff}.label-display[_ngcontent-%COMP%]{width:7.5vw;color:#fff;text-align:left}.eye-display[_ngcontent-%COMP%]{width:50px;color:#fff;border-right:2px solid #000;padding-right:1vh}.canvasstyle[_ngcontent-%COMP%]{position:fixed;left:2.2vw;right:auto;top:8vh;overflow:scroll;scrollbar-width:none;margin:0;padding:0;outline:none;border:none}.floatdiv[_ngcontent-%COMP%]{position:absolute;z-index:10000}.lbltypetxt[_ngcontent-%COMP%]{width:11vw;height:4vh;color:snow;font-size:2vh;background-color:#000;outline:none;border-radius:.2vh;border:.2vw solid grey;border-bottom:none;padding:0;text-indent:.4vw}.invalidInput[_ngcontent-%COMP%]{border:.2vw solid red}.validInput[_ngcontent-%COMP%]{border:.2vw solid grey}.availablelbl[_ngcontent-%COMP%]{background-color:#000;width:11vw;height:15vh;color:snow;font-size:2vh;font-weight:700;outline:none;border-radius:.2vh;border:.2vw solid grey;border-top:.1vh dotted snow;overflow:auto;scrollbar-width:none}.availablelbl[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.lblList[_ngcontent-%COMP%]{padding:0 .2vw}.lblElement[_ngcontent-%COMP%]{list-style-type:none;margin:.3vh 0;padding:0;justify-content:space-between;display:flex}.lblElement[_ngcontent-%COMP%]:hover{background-color:#111}.lblName[_ngcontent-%COMP%]{margin-left:.2vw;overflow:hidden;text-overflow:ellipsis}.lblCount[_ngcontent-%COMP%]{background-color:#222;margin-right:.2vw;padding:.1vh .2vw;border-radius:.2vw}.notExist[_ngcontent-%COMP%]{color:#999;font-size:1.5vh}"]}),ot);function st(t,e){if(1&t&&(g.Lb(0),g.Nb(1,"div",3),g.Nb(2,"label"),g.Nb(3,"img",4),g.Ub("click",function(){return e.$implicit.onClick()}),g.Xb(4,"translate"),g.Mb(),g.Mb(),g.Mb(),g.Kb()),2&t){var n=e.$implicit,i=e.index,o=g.Wb();g.xb(3),g.pc(n.style),g.cc("ngClass",o.conditionalIconTheme())("src",n.imgPath,g.nc)("alt",n.alt)("title",g.Yb(4,7,n.hoverLabel)),g.yb("data-index",i)}}var lt,ut=((lt=function(){function t(){var e=this;s(this,t),this._onClick=new g.n,this.isFolderTabOpen=!1,this.conditionalIconTheme=function(){return"utility-icon-light"},this.jsonSchema={logos:[{imgPath:"assets/icons/folder.svg",hoverLabel:"rightSideBar.folderOrFiles",alt:"Folder",onClick:function(){return e._onClick.emit({name:"project",closed:!1})}},{imgPath:"assets/icons/tag.svg",hoverLabel:"rightSideBar.label",alt:"Label",onClick:function(){return e._onClick.emit({name:"label",closed:!1})}},{imgPath:"assets/icons/bounding_box.svg",hoverLabel:"rightSideBar.annotation",alt:"Annotation",onClick:function(){return e._onClick.emit({name:"annotation",closed:!1})}},{imgPath:"assets/icons/statistic.svg",hoverLabel:"rightSideBar.statistic",alt:"Statistic",onClick:function(){return null}},{imgPath:"assets/icons/export.svg",hoverLabel:"rightSideBar.export",alt:"Export",style:"padding: 1.5vh 0.5vw;",onClick:function(){return null}},{imgPath:"assets/icons/reload.svg",hoverLabel:"rightSideBar.reload",alt:"Reload",style:"padding: 1.5vh 0.5vw;",onClick:function(){return null}}]}}return c(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||lt)},lt.\u0275cmp=g.Bb({type:lt,selectors:[["video-labelling-right-sidebar"]],outputs:{_onClick:"_onClick"},decls:3,vars:1,consts:[[1,"utility-right-sidebar-container"],[1,"utility-inner-container"],[4,"ngFor","ngForOf"],[1,"utility-icon-container"],[3,"ngClass","src","alt","title","click"]],template:function(t,e){1&t&&(g.Nb(0,"div",0),g.Nb(1,"div",1),g.qc(2,st,5,9,"ng-container",2),g.Mb(),g.Mb()),2&t&&(g.xb(2),g.cc("ngForOf",e.jsonSchema.logos))},directives:[l.k,l.j],pipes:[M.c],styles:[".utility-right-sidebar-container[_ngcontent-%COMP%]{position:absolute;top:4.5vh;min-width:2.2vw;max-width:2.2vw;min-height:95.5vh;max-height:95.5vh;background:#525353;border:.0625vw solid hsla(0,0%,100%,.25);z-index:1000}.utility-inner-container[_ngcontent-%COMP%]{min-width:2.2vw;max-width:2.2vw;position:absolute}.utility-icon-container[_ngcontent-%COMP%], .utility-inner-container[_ngcontent-%COMP%]{min-height:5vh;max-height:5vh}.utility-icon-light[_ngcontent-%COMP%]{min-width:1.5vw;max-width:1.5vw;min-height:3vh;max-height:3vh;padding:.3vw;position:absolute;cursor:pointer}.utility-icon-light[_ngcontent-%COMP%]:active, .utility-icon-light[_ngcontent-%COMP%]:focus{background:#a9a9a9}.input-none[_ngcontent-%COMP%]{display:none}"]}),lt),ht=n("Muja"),dt=function(t,e){return{i:t,tab:e}};function bt(t,e){if(1&t&&(g.Lb(0),g.Nb(1,"div",9),g.Jb(2,10),g.Mb(),g.Kb()),2&t){var n=e.$implicit,i=e.index,o=g.Wb(2),r=g.jc(2),a=g.jc(4);g.xb(1),g.cc("ngClass",o.checkCloseToggle(n)),g.yb("data-index",i),g.xb(1),g.cc("ngTemplateOutlet",0===i?r:a)("ngTemplateOutletContext",g.hc(4,dt,i,n))}}function gt(t,e){if(1&t&&(g.Nb(0,"div",7),g.qc(1,bt,3,7,"ng-container",8),g.Mb()),2&t){var n=g.Wb();g.xb(1),g.cc("ngForOf",n._tabStatus)}}function ft(t,e){if(1&t){var n=g.Ob();g.Nb(0,"label",11),g.sc(1),g.Xb(2,"translate"),g.Mb(),g.Nb(3,"div",12),g.Nb(4,"span",13),g.Nb(5,"div",14),g.Ub("click",function(){g.lc(n);var t=e.tab;return g.Wb().onClose(t)}),g.sc(6,"\u2716"),g.Mb(),g.Mb(),g.Mb(),g.Nb(7,"div",15,16),g.Nb(9,"div",17),g.Nb(10,"p"),g.sc(11,"project"),g.Mb(),g.Nb(12,"p"),g.sc(13,"project"),g.Mb(),g.Nb(14,"p"),g.sc(15,"project"),g.Mb(),g.Nb(16,"p"),g.sc(17,"project"),g.Mb(),g.Nb(18,"p"),g.sc(19,"project"),g.Mb(),g.Nb(20,"p"),g.sc(21,"project"),g.Mb(),g.Nb(22,"p"),g.sc(23,"project"),g.Mb(),g.Nb(24,"p"),g.sc(25,"project"),g.Mb(),g.Nb(26,"p"),g.sc(27,"project"),g.Mb(),g.Nb(28,"p"),g.sc(29,"project"),g.Mb(),g.Nb(30,"p"),g.sc(31,"project"),g.Mb(),g.Nb(32,"p"),g.sc(33,"project"),g.Mb(),g.Nb(34,"p"),g.sc(35,"project"),g.Mb(),g.Nb(36,"p"),g.sc(37,"project"),g.Mb(),g.Nb(38,"p"),g.sc(39,"project"),g.Mb(),g.Mb(),g.Mb()}if(2&t){var i=e.tab;g.xb(1),g.uc(" ",g.Yb(2,1,i.name)," ")}}function vt(t,e){if(1&t&&g.Jb(0,10),2&t){var n=e.i,i=e.tab;g.Wb();var o=g.jc(6),r=g.jc(8);g.cc("ngTemplateOutlet",1===n?o:r)("ngTemplateOutletContext",g.hc(2,dt,n,i))}}function mt(t,e){if(1&t){var n=g.Ob();g.Nb(0,"label",11),g.sc(1),g.Xb(2,"translate"),g.Mb(),g.Nb(3,"div",12),g.Nb(4,"span",13),g.Nb(5,"div",14),g.Ub("click",function(){g.lc(n);var t=e.tab;return g.Wb().onClose(t)}),g.sc(6,"\u2716"),g.Mb(),g.Mb(),g.Mb(),g.Nb(7,"div",18),g.Nb(8,"div",17),g.Nb(9,"p"),g.sc(10,"label"),g.Mb(),g.Nb(11,"p"),g.sc(12,"label"),g.Mb(),g.Nb(13,"p"),g.sc(14,"label"),g.Mb(),g.Nb(15,"p"),g.sc(16,"label"),g.Mb(),g.Nb(17,"p"),g.sc(18,"label"),g.Mb(),g.Nb(19,"p"),g.sc(20,"label"),g.Mb(),g.Nb(21,"p"),g.sc(22,"label"),g.Mb(),g.Nb(23,"p"),g.sc(24,"label"),g.Mb(),g.Nb(25,"p"),g.sc(26,"label"),g.Mb(),g.Nb(27,"p"),g.sc(28,"label"),g.Mb(),g.Nb(29,"p"),g.sc(30,"label"),g.Mb(),g.Nb(31,"p"),g.sc(32,"label"),g.Mb(),g.Nb(33,"p"),g.sc(34,"label"),g.Mb(),g.Nb(35,"p"),g.sc(36,"label"),g.Mb(),g.Nb(37,"p"),g.sc(38,"label"),g.Mb(),g.Mb(),g.Mb()}if(2&t){var i=e.tab;g.xb(1),g.tc(g.Yb(2,1,i.name))}}var pt=function(t){return{annotation:t}};function xt(t,e){if(1&t&&(g.Lb(0),g.Jb(1,10),g.Kb()),2&t){var n=e.$implicit;g.Wb(3);var i=g.jc(10),o=g.jc(12);g.xb(1),g.cc("ngTemplateOutlet",n.bnd_box?i:o)("ngTemplateOutletContext",g.gc(2,pt,n))}}function wt(t,e){if(1&t&&(g.Lb(0),g.qc(1,xt,2,4,"ng-container",8),g.Kb()),2&t){var n=g.Wb().tab;g.xb(1),g.cc("ngForOf",n.annotation)}}function yt(t,e){if(1&t){var n=g.Ob();g.Nb(0,"label",11),g.sc(1),g.Xb(2,"translate"),g.Mb(),g.Nb(3,"div",12),g.Nb(4,"span",13),g.Nb(5,"div",14),g.Ub("click",function(){g.lc(n);var t=e.tab;return g.Wb().onClose(t)}),g.sc(6,"\u2716"),g.Mb(),g.Mb(),g.Mb(),g.Nb(7,"div",19),g.Nb(8,"div",17),g.Nb(9,"div",20),g.qc(10,wt,2,1,"ng-container",21),g.Mb(),g.Mb(),g.Mb()}if(2&t){var i=e.tab;g.xb(1),g.tc(g.Yb(2,2,i.name)),g.xb(9),g.cc("ngIf",null==i?null:i.annotation)}}function _t(t,e){1&t&&(g.Lb(0),g.Nb(1,"div",17),g.Nb(2,"p"),g.sc(3,"project"),g.Mb(),g.Nb(4,"p"),g.sc(5,"project"),g.Mb(),g.Nb(6,"p"),g.sc(7,"project"),g.Mb(),g.Nb(8,"p"),g.sc(9,"project"),g.Mb(),g.Nb(10,"p"),g.sc(11,"project"),g.Mb(),g.Nb(12,"p"),g.sc(13,"project"),g.Mb(),g.Nb(14,"p"),g.sc(15,"project"),g.Mb(),g.Nb(16,"p"),g.sc(17,"project"),g.Mb(),g.Nb(18,"p"),g.sc(19,"project"),g.Mb(),g.Nb(20,"p"),g.sc(21,"project"),g.Mb(),g.Nb(22,"p"),g.sc(23,"project"),g.Mb(),g.Nb(24,"p"),g.sc(25,"project"),g.Mb(),g.Nb(26,"p"),g.sc(27,"project"),g.Mb(),g.Nb(28,"p"),g.sc(29,"project"),g.Mb(),g.Nb(30,"p"),g.sc(31,"project"),g.Mb(),g.Mb(),g.Kb())}function Mt(t,e){1&t&&(g.Lb(0),g.Nb(1,"div",17),g.Nb(2,"p"),g.sc(3,"project"),g.Mb(),g.Nb(4,"p"),g.sc(5,"project"),g.Mb(),g.Nb(6,"p"),g.sc(7,"project"),g.Mb(),g.Nb(8,"p"),g.sc(9,"project"),g.Mb(),g.Nb(10,"p"),g.sc(11,"project"),g.Mb(),g.Nb(12,"p"),g.sc(13,"project"),g.Mb(),g.Nb(14,"p"),g.sc(15,"project"),g.Mb(),g.Nb(16,"p"),g.sc(17,"project"),g.Mb(),g.Nb(18,"p"),g.sc(19,"project"),g.Mb(),g.Nb(20,"p"),g.sc(21,"project"),g.Mb(),g.Nb(22,"p"),g.sc(23,"project"),g.Mb(),g.Nb(24,"p"),g.sc(25,"project"),g.Mb(),g.Nb(26,"p"),g.sc(27,"project"),g.Mb(),g.Nb(28,"p"),g.sc(29,"project"),g.Mb(),g.Nb(30,"p"),g.sc(31,"project"),g.Mb(),g.Mb(),g.Kb())}var Ct,Ot,Pt,kt,St,Bt=((Ct=function(){function t(){var e=this;s(this,t),this._tabStatus=[],this._onClose=new g.n,this.isTabStillOpen=!0,this.onClose=function(t){e._onClose.emit(t)},this.checkCloseToggle=function(t){var n="";return"label"===t.name&&e._tabStatus[2].closed||"project"===t.name&&e._tabStatus[1].closed&&e._tabStatus[2].closed||"annotation"===t.name||(n="flex-content"),t.closed&&(n+=" closed"),n},this.checkStateEqual=function(t,e){return!Object(ht.a)(t,e)}}return c(t,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(t){if(t._tabStatus&&this.checkStateEqual(t._tabStatus.currentValue,t._tabStatus.previousValue)){this.isTabStillOpen=!1;var e,n=r(this._tabStatus);try{for(n.s();!(e=n.n()).done;)if(!e.value.closed){this.isTabStillOpen=!0;break}}catch(i){n.e(i)}finally{n.f()}}}}]),t}()).\u0275fac=function(t){return new(t||Ct)},Ct.\u0275cmp=g.Bb({type:Ct,selectors:[["video-labelling-project"]],inputs:{_tabStatus:"_tabStatus"},outputs:{_onClose:"_onClose"},features:[g.vb],decls:13,vars:1,consts:[["class","tab-container",4,"ngIf"],["thumbnailTab",""],["nonThumbnailTab",""],["labelTab",""],["annotationTab",""],["boundingBox",""],["polygon",""],[1,"tab-container"],[4,"ngFor","ngForOf"],[1,"utility-right-project-container","tab","flex-fill-remaining",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"tab-name"],[1,"flex-tab-icons"],[1,"tab-close-thumbnailless"],[1,"div-close",3,"click"],["id","thumbnailList",1,"utility-inner-container","tab-height","scroll"],["thumbnailList",""],[1,"flex-item"],["id","inner-container",1,"utility-inner-container","tab-height","scroll"],["id","inner-container",1,"utility-inner-container","scroll","tab-smaller-height"],[1,"flex-center-width"],[4,"ngIf"]],template:function(t,e){1&t&&(g.qc(0,gt,2,1,"div",0),g.qc(1,ft,40,3,"ng-template",null,1,g.rc),g.qc(3,vt,1,5,"ng-template",null,2,g.rc),g.qc(5,mt,39,3,"ng-template",null,3,g.rc),g.qc(7,yt,11,4,"ng-template",null,4,g.rc),g.qc(9,_t,32,0,"ng-template",null,5,g.rc),g.qc(11,Mt,32,0,"ng-template",null,6,g.rc)),2&t&&g.cc("ngIf",e.isTabStillOpen)},directives:[l.l,l.k,l.j,l.o],pipes:[M.c],styles:['.tab-container[_ngcontent-%COMP%]{display:flex;flex-flow:column;height:100%;right:0;position:fixed;min-width:18.5vw;max-width:18.5vw}.utility-right-project-container[_ngcontent-%COMP%]{height:100%;min-width:16.3vw;max-width:16.3vw;background:#383535;border:.0325vw solid hsla(0,0%,100%,.25);border-top:none;z-index:1000;align-items:stretch}.utility-right-project-container[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;min-width:8.5vw;max-width:8.5vw;min-height:4vh;max-height:4vh;background:#383535;z-index:-1;font-size:1.5vh;line-height:3vh;color:#fff;padding:.5vh 0 0 2vw}.tab[_ngcontent-%COMP%]{position:sticky;overflow:hidden}.tab[_ngcontent-%COMP%]:before{position:absolute;content:"";top:4vh;min-width:100vw;max-width:100vw;min-height:93vh;max-height:93vh;background:#383535;z-index:-1}.flex-fixed[_ngcontent-%COMP%]{flex:0 1 25vh}.flex-fill-remaining[_ngcontent-%COMP%]{flex:1 1 auto}.flex-content[_ngcontent-%COMP%]{display:flex;flex-flow:column;height:33%;min-height:10%;flex-shrink:0;flex-grow:0;resize:vertical}.tab-name[_ngcontent-%COMP%]{font-size:1.7vh;padding:.5vw 2vw 0 1vw;display:inline-block;color:#fff;position:absolute}.tab-close-thumbnail[_ngcontent-%COMP%]{margin-left:3vw;justify-content:center}.tab-close-thumbnail[_ngcontent-%COMP%], .tab-close-thumbnailless[_ngcontent-%COMP%]{float:right;vertical-align:middle;min-height:4vh;max-height:4vh;color:#696969;font-size:1.8vh;line-height:4vh;text-align:center;display:inline-grid;padding-bottom:1vh}.tab-close-thumbnailless[_ngcontent-%COMP%]{flex:1 0 60%;justify-content:right}.div-close[_ngcontent-%COMP%]{margin-right:.5vw;min-width:1.6vw;max-width:1.6vw;min-height:4vh;max-height:4vh;color:#fff;cursor:pointer;text-align:center;float:right}.div-close[_ngcontent-%COMP%]:active{background:grey}.utility-inner-container[_ngcontent-%COMP%]{padding:2.5vh 0 0 .2vw;scroll-behavior:smooth;overflow:hidden auto;z-index:100;min-width:15.5vw;max-width:15.5vw}.tab-height[_ngcontent-%COMP%]{height:85%}.tab-smaller-height[_ngcontent-%COMP%]{height:60%}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 6px rgba(0,0,0,.3);border-radius:10px;background-color:#000}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5vw}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#525353}.img-container[_ngcontent-%COMP%], .utility-icon-container[_ngcontent-%COMP%]{min-height:5vh;max-height:5vh}.img-container[_ngcontent-%COMP%]{font-size:1.5vh;color:#fff;display:flex;flex-direction:row;justify-content:flex-start;align-items:center;cursor:pointer;margin:0 .3vw;padding:.1vh .4vw}.img-container[_ngcontent-%COMP%]:hover{background-color:#444;border-radius:2px}.img-selected[_ngcontent-%COMP%]{background:#555}.img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block}.img[_ngcontent-%COMP%], .img-skeleton[_ngcontent-%COMP%]{max-height:4.3vh;min-height:4.3vh;max-width:3vw}.img-skeleton[_ngcontent-%COMP%]{min-width:3vw;border:.005vh dotted #525353}.img-name[_ngcontent-%COMP%]{margin-left:.5vw;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%}.closed[_ngcontent-%COMP%]{display:none}.utility-icon-dark[_ngcontent-%COMP%], .utility-icon-light[_ngcontent-%COMP%]{min-width:1.5vw;max-width:1.5vw;min-height:3vh;max-height:3vh;padding:.3vw;position:absolute}.flex-item[_ngcontent-%COMP%]{align-items:center;flex-direction:column;font-size:1.5vh;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.flex-center-width[_ngcontent-%COMP%], .flex-item[_ngcontent-%COMP%]{display:flex;justify-content:center}.flex-center-width[_ngcontent-%COMP%]{width:90%;flex-wrap:wrap}.label[_ngcontent-%COMP%]{flex:1 1 80%;display:flex;justify-content:flex-start;margin:.25vh 0}.pointer[_ngcontent-%COMP%]{cursor:pointer}.annotation-active[_ngcontent-%COMP%], .label-active[_ngcontent-%COMP%]{border:.15vw solid #ff0}.utility-info-btn[_ngcontent-%COMP%]{font-size:1vw;min-width:0;max-width:0;min-height:2.5vh;max-height:2.5vh;line-height:0;right:21vh;position:absolute;background:#383535;border:none;color:#fff}.flex-tab-icons[_ngcontent-%COMP%]{display:flex;width:100%}.extra-icons[_ngcontent-%COMP%]{cursor:pointer}.extra-icons[_ngcontent-%COMP%]:active{background:grey}.tab-extra-icons[_ngcontent-%COMP%]{float:right;vertical-align:middle;font-size:1.7vh;line-height:4vh;text-align:center;color:#fff;flex:1 0 15%;justify-content:flex-start}.tab-text[_ngcontent-%COMP%]{font-size:1.7vh;min-width:6vw;max-width:6vw}.inner-content[_ngcontent-%COMP%]{max-height:25vh;min-height:25vh;min-width:3vw;max-width:3vw}.div-input[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin:.5vh .9vw}.input[_ngcontent-%COMP%]{border-radius:8vw;border:none;outline:none;padding:.3vw 0 .3vw 1vw;min-height:1.5vh;max-height:1.5vh;min-width:13vw;max-width:13vw;font-size:1.3vh;background:#525353;color:#fff}.input-invalid[_ngcontent-%COMP%]{border:.2vw solid red}.img-path[_ngcontent-%COMP%]{margin-top:4vh}.indicator[_ngcontent-%COMP%]{background-color:#75fe7c}.indicator[_ngcontent-%COMP%], .no-indicator[_ngcontent-%COMP%]{height:1vh;width:.5vw;border-radius:50%;position:relative}.no-indicator[_ngcontent-%COMP%]{background-color:#ffba54}.not-exist[_ngcontent-%COMP%]{font-size:1.5vh;color:#999}.delete-annotation[_ngcontent-%COMP%], .delete-label[_ngcontent-%COMP%]{position:absolute;right:2vw}.open-all-tabs[_ngcontent-%COMP%]{cursor:pointer;padding:.2vh .2vw;border-radius:.7vw}.open-all-tabs[_ngcontent-%COMP%]:hover{background:#636363}.open-all-tabs[_ngcontent-%COMP%]:active, .open-all-tabs[_ngcontent-%COMP%]:focus{background:#737474}.tab-skeleton[_ngcontent-%COMP%]{position:absolute;height:100vh;width:16.5vw;background:#525353;border-left:.0625vw solid hsla(0,0%,100%,.25);text-align:center;color:#cac8c8;font-size:2vh}.choose-tab[_ngcontent-%COMP%]{margin-top:42vh}.thumbnail-actions[_ngcontent-%COMP%]{text-align:end;padding-right:1vw;width:10vw}.thumbnail-actions-icon[_ngcontent-%COMP%]{border-radius:50%;padding:.2vh}.thumbnail-actions-icon[_ngcontent-%COMP%]:hover{background:#555}']}),Ct),jt=[{path:"",component:(Ot=function(){function t(){var e=this;s(this,t),this.tabStatus=[{name:"project",closed:!0},{name:"label",closed:!0},{name:"annotation",closed:!0}],this.onToggleTab=function(t){e.tabStatus.forEach(function(e){e.name===t.name&&(e.closed=!e.closed)})},this.onChangeMetadata=function(t){console.log(t)},this.selectedMetaData={img_x:0,img_y:0,img_w:960,img_h:540,img_ori_h:1920,img_ori_w:1080,img_path:"path",img_thumbnail:"",project_name:"project name",uuid:"1234",bnd_box:[],img_depth:void 0,file_size:12345,polygons:void 0}}return c(t,[{key:"ngOnInit",value:function(){}}]),t}(),Ot.\u0275fac=function(t){return new(t||Ot)},Ot.\u0275cmp=g.Bb({type:Ot,selectors:[["app-video-labelling-layout"]],decls:8,vars:2,consts:[[1,"layout-container"],[1,"content-container"],[3,"_selectMetadata","_onChangeMetadata"],[3,"_onClick"],[3,"_tabStatus","_onClose"]],template:function(t,e){1&t&&(g.Nb(0,"div",0),g.Nb(1,"div"),g.Ib(2,"page-header"),g.Mb(),g.Nb(3,"div",1),g.Ib(4,"video-labelling-left-sidebar"),g.Nb(5,"video-labelling-object-detection",2),g.Ub("_onChangeMetadata",function(t){return e.onChangeMetadata(t)}),g.Mb(),g.Nb(6,"video-labelling-right-sidebar",3),g.Ub("_onClick",function(t){return e.onToggleTab(t)}),g.Mb(),g.Nb(7,"video-labelling-project",4),g.Ub("_onClose",function(t){return e.onToggleTab(t)}),g.Mb(),g.Mb(),g.Mb()),2&t&&(g.xb(5),g.cc("_selectMetadata",e.selectedMetaData),g.xb(2),g.cc("_tabStatus",e.tabStatus))},directives:[p.a,k,ct,ut,Bt],styles:['.layout-container[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.content-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;min-width:97.8vw;max-width:97.8vw}.modal-button[_ngcontent-%COMP%]{line-height:1vh;font-size:1vw;padding:.5vw;background:#262a2e;color:azure}.close-button[_ngcontent-%COMP%]{border:none;cursor:pointer}.float-right[_ngcontent-%COMP%]{float:right}.font-title[_ngcontent-%COMP%]{font-size:1.7vw}.font-label[_ngcontent-%COMP%]{line-height:4vh;font-size:1vw;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.main-label-container[_ngcontent-%COMP%]{min-width:35vw;max-width:35vw}.main-label-container[_ngcontent-%COMP%], .sub-label-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.sub-label-container[_ngcontent-%COMP%]{min-width:40vw;max-width:40vw}.sub-label-flex-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1 1 100%;min-width:0}.static-select[_ngcontent-%COMP%]{min-height:4vh;max-height:4vh;min-width:10vw;max-width:10vw;line-height:3vh;font-size:.9vw;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:5vh;margin:0;-moz-text-align-last:center;text-align-last:center;background:#262a2e;color:#fff;box-shadow:inset -.5vw 6.25vw 1vw 0 rgba(0,0,0,.2),inset -.5vw -.5vw 1vw 0 hsla(0,0%,100%,.4)}.static-select[_ngcontent-%COMP%]:hover{box-shadow:inset -.375vw -.375vw .625vw 0 rgba(0,0,0,.2),inset .375vw .375vw .625vw 0 hsla(0,0%,100%,.5)}.static-select[_ngcontent-%COMP%]:active{box-shadow:inset .375vw .375vw .625vw 0 rgba(0,0,0,.2),inset -.375vw -.375vw .625vw 0 hsla(0,0%,100%,.5)}.static-input[_ngcontent-%COMP%]{min-height:4vh;max-height:4vh;min-width:10vw;max-width:10vw;line-height:3vh;font-size:.9vw;border-radius:2vw;border:none;outline:none;background-color:#363636;color:#fff;padding:0 1vw}.hr-line[_ngcontent-%COMP%]{margin:5vh 0}.sub-label-padding[_ngcontent-%COMP%]{padding:0 0 2vh}.validate-msg[_ngcontent-%COMP%]{color:red;font-size:1vw}.flex-first[_ngcontent-%COMP%]{flex:1 1 35%}.flex-second[_ngcontent-%COMP%]{flex:1 1 55%}.flex-third[_ngcontent-%COMP%]{flex:0 0 5%}.flex-fourth[_ngcontent-%COMP%]{line-height:1vh;font-size:1vw;padding:.5vw;background:#262a2e;color:azure;flex:0 0 5%}.modal[_ngcontent-%COMP%]{z-index:1000;padding-top:10vh;top:0;width:100%;height:100%;overflow:auto;background-color:transparent;scrollbar-width:none;position:fixed;background:rgba(0,0,0,.8)}.modal-content[_ngcontent-%COMP%]{background-color:#525353;padding:1vw;max-width:20vw;min-width:20vw;border-radius:1vw;margin:15vh auto auto}.modal-content-container[_ngcontent-%COMP%]{margin-left:1.3vw}.modal-content-header[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:3vh}.modal-button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:1vw 1vw 1vw 2vw}.modal-button-cancel[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.export-content-container[_ngcontent-%COMP%]{margin-left:.5vw}.button-style[_ngcontent-%COMP%]{border-radius:1vh;border:none;outline:none;color:#fff;cursor:pointer}.confg-btn[_ngcontent-%COMP%]{margin-right:.7vw}.confg-btn[_ngcontent-%COMP%], .confgdata-btn[_ngcontent-%COMP%]{padding:1vh .5vw;background-color:#2d8ceb;font-size:2vh;min-width:7.5vw}.cancel-btn[_ngcontent-%COMP%], .with-data[_ngcontent-%COMP%]{font-size:1.5vh}.cancel-btn[_ngcontent-%COMP%]{padding:1vh 1vw;background-color:#444}.error-msg[_ngcontent-%COMP%]{padding-top:1vh;font-size:2vh}.help-icon[_ngcontent-%COMP%]{height:3vh}.help-icon-container[_ngcontent-%COMP%]{padding-right:1vw;padding-left:.4vw}.help-icon-container[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{visibility:hidden;width:15vw;background-color:#000;color:#fff;text-align:left;border-radius:6px;padding:1vh .5vw;position:absolute;top:65%;margin-left:-60px;text-align:justify;text-justify:inter-word}.help-icon-container[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible}.message[_ngcontent-%COMP%]{font-size:1vw;overflow-wrap:break-word}.modal-message-container[_ngcontent-%COMP%]{padding-right:3.5vw}.break[_ngcontent-%COMP%]{overflow-wrap:break-word}.save-format-list[_ngcontent-%COMP%]{left:0;top:0;width:100%;height:100%;overflow:auto}.save-format-content[_ngcontent-%COMP%]{margin:auto;padding:10px}.switch-container[_ngcontent-%COMP%]{font-size:small;align-content:center;text-align:center}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:4em;height:1.8em;margin-left:auto;margin-right:auto}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.switch[_ngcontent-%COMP%]   .checkBox[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background:#000;background-size:100% 100%;background-position:50%}.switch[_ngcontent-%COMP%]   .checkBox[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translateX(2.2em)}.switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.8s}.switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:1.6em;width:1.6em;left:.14em;bottom:.15em;background-color:snow;transition:.8s}.switch[_ngcontent-%COMP%]   .round[_ngcontent-%COMP%]{border-radius:1.2em}.switch[_ngcontent-%COMP%]   .round[_ngcontent-%COMP%]:before{border-radius:50%}.switch[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:8px;margin-top:.5em;outline:none}.switch-2[_ngcontent-%COMP%]{position:relative;display:inline-block;width:2.5em;height:1.2em;margin-left:auto;margin-right:auto}.switch-2[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.switch-2[_ngcontent-%COMP%]   .checkBox[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background:#000;background-size:100% 100%;background-position:50%}.switch-2[_ngcontent-%COMP%]   .checkBox[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translateX(1.5em)}.switch-2[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.5s}.switch-2[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:1.2em;width:1.2em;left:.14em;background-color:snow;transition:.5s}.switch-2[_ngcontent-%COMP%]   .round[_ngcontent-%COMP%]{border-radius:1.2em}.switch-2[_ngcontent-%COMP%]   .round[_ngcontent-%COMP%]:before{border-radius:50%}.switch-2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:8px;margin-top:.5em;outline:none}.no-margin-left[_ngcontent-%COMP%]{margin-left:0}.space-verticle[_ngcontent-%COMP%]{background-color:transparent;outline:none;border:none;margin-left:1.5em;margin-right:1.5em}.save-format-btn[_ngcontent-%COMP%]{width:90%;height:6em;margin-top:2%;margin-bottom:2%;margin-left:4.5%;background:#000;background-size:100% 100%;background-position:50%;font-size:medium;outline:none;border:none;color:snow;overflow:hidden;border-radius:5px}.save-format-btn[_ngcontent-%COMP%]:hover{text-shadow:0 0 30px #888;box-shadow:5px 5px 10px #888,-5px -5px 10px #888;cursor:pointer}.save-format-btn[_ngcontent-%COMP%]:active:hover{border:3px dashed green}.adv-settings[_ngcontent-%COMP%]{padding:1vh;margin:1vh 1.5vw;color:#ccc;font-size:.6vw;cursor:pointer;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;background:#30353a;border-radius:.5vh;float:right}.adv-settings[_ngcontent-%COMP%]:hover{background:#373d42}.modal-adv-container[_ngcontent-%COMP%]{margin:1vh 1vw}.modal-adv-instruction[_ngcontent-%COMP%]{color:#fff;opacity:.5}.modal-adv-label[_ngcontent-%COMP%]{font-size:1.5vh;margin-left:2vw;white-space:nowrap;width:9vw;overflow:hidden;text-overflow:ellipsis;display:inline-block}.modal-adv-btn[_ngcontent-%COMP%]{float:right;padding:.5vh 1vw;background-color:#2d8ceb;font-size:1.5vh;min-width:3vw}.shortcut-key-info-header[_ngcontent-%COMP%]{font-size:1.2vw;color:#fff;text-align:center;margin-bottom:2vh}.table-box[_ngcontent-%COMP%]{width:100%;height:90%;overflow-y:auto}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border-collapse:collapse;text-align:center;color:#fff}th[_ngcontent-%COMP%]{top:0;background:#262a2e;color:#fff;border-top:none!important}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){color:#bebebe}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:60px;text-align:center;background:#262a2e}.validation-error[_ngcontent-%COMP%]{margin:1px;color:red}.validation-success[_ngcontent-%COMP%]{margin:1px;color:green}.label[_ngcontent-%COMP%]{color:#fff;font-size:2vh;margin-right:1vw}.label-file[_ngcontent-%COMP%]{padding-top:.5vh}.margin-bottom[_ngcontent-%COMP%]{margin-bottom:.5vh}.deleteimg-btn[_ngcontent-%COMP%], .renameimg-btn[_ngcontent-%COMP%]{padding:1vh .5vw;background-color:#2d8ceb;margin-top:.7vw;margin-right:.7vw;font-size:2vh;min-width:7.5vw;float:right}.font-delete-img[_ngcontent-%COMP%]{line-height:4vh;font-size:1vw}.checkbox[_ngcontent-%COMP%]{height:1.5vh;width:1.5vw}']}),Ot)},{path:"upload",component:m}],Nt=((St=function t(){s(this,t)}).\u0275mod=g.Fb({type:St}),St.\u0275inj=g.Eb({factory:function(t){return new(t||St)},imports:[[d.d.forChild(jt)]]}),St),Ft=((kt=function t(){s(this,t)}).\u0275mod=g.Fb({type:kt}),kt.\u0275inj=g.Eb({factory:function(t){return new(t||kt)},imports:[[l.b,u.a,M.b]]}),kt),Lt=((Pt=function t(){s(this,t)}).\u0275mod=g.Fb({type:Pt}),Pt.\u0275inj=g.Eb({factory:function(t){return new(t||Pt)},imports:[[l.b,u.a,Nt,Ft]]}),Pt)},WrcE:function(t,e,n){var i=n("PhXl");t.exports=function(){var t=u(regeneratorRuntime.mark(function t(e){var n,o,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e,void 0!==e){t.next=3;break}return t.abrupt("return",new Uint8Array);case 3:if("string"!=typeof e){t.next=16;break}if(!/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)){t.next=8;break}n=atob(e.split(",")[1]).split("").map(function(t){return t.charCodeAt(0)}),t.next=14;break;case 8:return t.next=10,fetch(i(e));case 10:return o=t.sent,t.next=13,o.arrayBuffer();case 13:n=t.sent;case 14:t.next=21;break;case 16:if(t.t0=e instanceof File||e instanceof Blob,!t.t0){t.next=21;break}return t.next=20,r=e,new Promise(function(t,e){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=function(t){var n=t.target.error.code;e(Error("File could not be read! Code="+n))},n.readAsArrayBuffer(r)});case 20:n=t.sent;case 21:return t.abrupt("return",new Uint8Array(n));case 22:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},Z8XC:function(t){t.exports=JSON.parse('{"_args":[["@ffmpeg/ffmpeg@0.10.1","G:\\\\Certifai\\\\Classifai_FrontEnd"]],"_from":"@ffmpeg/ffmpeg@0.10.1","_id":"@ffmpeg/ffmpeg@0.10.1","_inBundle":false,"_integrity":"sha512-ChQkH7Rh57hmVo1LhfQFibWX/xqneolJKSwItwZdKPcLZuKigtYAYDIvB55pDfP17VtR1R77SxgkB2/UApB+Og==","_location":"/@ffmpeg/ffmpeg","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"@ffmpeg/ffmpeg@0.10.1","name":"@ffmpeg/ffmpeg","escapedName":"@ffmpeg%2fffmpeg","scope":"@ffmpeg","rawSpec":"0.10.1","saveSpec":null,"fetchSpec":"0.10.1"},"_requiredBy":["/"],"_resolved":"https://registry.npmjs.org/@ffmpeg/ffmpeg/-/ffmpeg-0.10.1.tgz","_spec":"0.10.1","_where":"G:\\\\Certifai\\\\Classifai_FrontEnd","author":{"name":"Jerome Wu","email":"jeromewus@gmail.com"},"browser":{"./src/node/index.js":"./src/browser/index.js"},"bugs":{"url":"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},"dependencies":{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},"description":"FFmpeg WebAssembly version","devDependencies":{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.10.0","@types/emscripten":"^1.39.4","babel-loader":"^8.1.0","chai":"^4.2.0","cors":"^2.8.5","eslint":"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1","express":"^4.17.1","mocha":"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0","webpack":"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"},"directories":{"example":"examples"},"engines":{"node":">=12.16.1"},"homepage":"https://github.com/ffmpegwasm/ffmpeg.wasm#readme","keywords":["ffmpeg","WebAssembly","video"],"license":"MIT","main":"src/index.js","name":"@ffmpeg/ffmpeg","repository":{"type":"git","url":"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},"scripts":{"build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","lint":"eslint src","prepublishOnly":"npm run build","start":"node scripts/server.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html","test:node":"node --experimental-wasm-threads --experimental-wasm-bulk-memory node_modules/.bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","wait":"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js"},"types":"src/index.d.ts","version":"0.10.1"}')},bP5C:function(t,e,n){n("PhXl");var i=n("Z8XC").devDependencies;t.exports={corePath:"https://unpkg.com/@ffmpeg/core@".concat(i["@ffmpeg/core"].substring(1),"/dist/ffmpeg-core.js")}},kI6T:function(t,e){var n=!1,i=function(){};t.exports={logging:n,setLogging:function(t){n=t},setCustomLogger:function(t){i=t},log:function(t,e){i({type:t,message:e}),n&&console.log("[".concat(t,"] ").concat(e))}}},kRDC:function(t,e,n){n("ls82");var i=n("lCMN"),o=n("uN/h").fetchFile;t.exports={createFFmpeg:i,fetchFile:o}},lCMN:function(e,i,r){var a=r("xLGt"),c=a.defaultArgs,s=a.baseOptions,l=r("kI6T"),h=l.setLogging,d=l.setCustomLogger,b=l.log,g=r("8cPH"),f=r("G9FC"),v=r("uN/h"),m=v.defaultOptions,p=v.getCreateFFmpegCore,x=r("Z8XC").version,w=Error("ffmpeg.wasm is not ready, make sure you have completed load().");e.exports=function(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n(n(n({},s),m),i),a=r.log,l=r.logger,v=r.progress,y=o(r,["log","logger","progress"]),_=null,M=null,C=null,O=!1,P=v,k=function(t){var e=t.type,n=t.message;b(e,n),g(n,P),function(t){"FFMPEG_END"===t&&null!==C&&(C(),C=null,O=!1)}(n)};return h(a),d(l),b("info","use ffmpeg.wasm v"+x),{setProgress:function(t){P=t},setLogger:function(t){d(t)},setLogging:h,load:(e=u(regeneratorRuntime.mark(function t(){var e,n,i,o,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(b("info","load ffmpeg-core"),null===_){t.next=2;break}throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.");case 2:return b("info","loading ffmpeg-core"),t.next=5,p(y);case 5:return e=t.sent,n=e.createFFmpegCore,i=e.corePath,o=e.workerPath,r=e.wasmPath,t.next=12,n({mainScriptUrlOrBlob:i,printErr:function(t){return k({type:"fferr",message:t})},print:function(t){return k({type:"ffout",message:t})},locateFile:function(t,e){if("undefined"!=typeof window){if(void 0!==r&&t.endsWith("ffmpeg-core.wasm"))return r;if(void 0!==o&&t.endsWith("ffmpeg-core.worker.js"))return o}return e+t}});case 12:_=t.sent,M=_.cwrap("proxy_main","number",["number","number"]),b("info","ffmpeg-core loaded");case 15:case"end":return t.stop()}},t)})),function(){return e.apply(this,arguments)}),isLoaded:function(){return null!==_},run:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(b("info","run ffmpeg command: "+n.join(" ")),null===_)throw w;if(O)throw Error("ffmpeg.wasm can only run one command at a time");return O=!0,new Promise(function(e){var i=[].concat(t(c),n).filter(function(t){return 0!==t.length});C=e,M.apply(void 0,t(f(_,i)))})},exit:function(){if(null===_)throw w;O=!1,_.exit(1),_=null,M=null,C=null},FS:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(b("info","run FS.".concat(t," ").concat(n.map(function(t){return"string"==typeof t?t:"<".concat(t.length," bytes binary file>")}).join(" "))),null===_)throw w;var o=null;try{var r;o=(r=_.FS)[t].apply(r,n)}catch(a){throw"readdir"===t?Error("ffmpeg.FS('readdir', '".concat(n[0],"') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')")):"readFile"===t?Error("ffmpeg.FS('readFile', '".concat(n[0],"') error. Check if the path exists")):Error("Oops, something went wrong in FS operation.")}return o}}}},ls82:function(t,e,n){var i=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",r=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(P){c=function(t,e,n){return t[e]=n}}function s(t,e,n,i){var o=Object.create((e&&e.prototype instanceof h?e:h).prototype),r=new M(i||[]);return o._invoke=function(t,e,n){var i="suspendedStart";return function(o,r){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw r;return{value:void 0,done:!0}}for(n.method=o,n.arg=r;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=l(t,e,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}(t,n,r),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(P){return{type:"throw",arg:P}}}t.wrap=s;var u={};function h(){}function d(){}function b(){}var g={};g[o]=function(){return this};var f=Object.getPrototypeOf,v=f&&f(f(C([])));v&&v!==e&&n.call(v,o)&&(g=v);var m=b.prototype=h.prototype=Object.create(g);function p(t){["next","throw","return"].forEach(function(e){c(t,e,function(t){return this._invoke(e,t)})})}function x(t,e){function i(o,r,a,c){var s=l(t[o],t,r);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){i("next",t,a,c)},function(t){i("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return i("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function r(){return new e(function(e,o){i(t,n,e,o)})}return o=o?o.then(r,r):r()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var i=l(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,u;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function y(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(y,this),this.reset(!0)}function C(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function e(){for(;++i<t.length;)if(n.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:O}}function O(){return{value:void 0,done:!0}}return d.prototype=m.constructor=b,b.constructor=d,d.displayName=c(b,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},p(x.prototype),x.prototype[r]=function(){return this},t.AsyncIterator=x,t.async=function(e,n,i,o,r){void 0===r&&(r=Promise);var a=new x(s(e,n,i,o),r);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},p(m),c(m,a,"Generator"),m[o]=function(){return this},m.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=C,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(n,i){return a.type="throw",a.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],a=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var c=n.call(r,"catchLoc"),s=n.call(r,"finallyLoc");if(c&&s){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var o=i.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}(t.exports);try{regeneratorRuntime=i}catch(o){Function("r","regeneratorRuntime = r")(i)}},"uN/h":function(t,e,n){var i=n("bP5C"),o=n("Ji6A"),r=n("WrcE");t.exports={defaultOptions:i,getCreateFFmpegCore:o,fetchFile:r}},xLGt:function(t,e){t.exports={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:function(){},progress:function(){},corePath:""}}}}])}();